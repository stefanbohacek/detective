"strict";function ready(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function productionServer(){return window.location.href.indexOf("stefanbohacek.com")>-1}function removeClasses(e){e.className=""}function getEventTarget(e){return e=e||window.event,e.target||e.srcElement}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}window.smoothScroll=function(){if(void 0!==document.querySelectorAll&&void 0!==window.pageYOffset&&void 0!==history.pushState){var e=function(e){return"HTML"===e.nodeName?-window.pageYOffset:e.getBoundingClientRect().top+window.pageYOffset},t=function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},o=function(e,o,n,a){return n>a?o:e+(o-e)*t(n/a)},n=function(t,n,a){n=n||500;var s,r=window.pageYOffset;s="number"==typeof t?parseInt(t):e(t);var i=Date.now(),l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,15)},d=function(){var e=Date.now()-i;window.scroll(0,o(r,s,e,n)),e>n?"function"==typeof a&&a(t):l(d)};d()},a=function(e){e.preventDefault(),n(document.getElementById(this.hash.substring(1)),500,function(){})};return document.addEventListener("DOMContentLoaded",function(){for(var e,t=document.querySelectorAll('a[href^="#"]'),o=t.length;e=t[--o];)e.addEventListener("click",a,!1)}),n}}();var xmlToJSON=function(e){var t=new X2JS,o=t.xml_str2json(e);return o=o.response},userRole,partnerRole="unknown",gameStarted=!1,gameFinished=!1;window.onbeforeunload=function(){return gameFinished===!1?"Are you sure?":void 0},ready(function(){function e(e,t){return e=e.toLowerCase().trim().replace(/ /g,""),t===!0&&(e=e.replace(/[.,?!\s,]/g,"")),e}function t(e){for(var t=0,o=Y.length;o>t;t++)if(new RegExp(Y[t],"gi").test(e.replace(/\W/g,""))===!0)return c("system","ERROR"),c("system","Unable to send message"),!0;return!1}function o(){B.service=u.getAttribute("data-service");var e="Play Detective, a game by @stefanbohacek";null!==B.service&&"reddit"===B.service&&(e="[log] TITLE"),B.shareUrl=u.getAttribute("data-url").replace(/DESCRIPTION/,'Detective: A "reverse Turing test" chat game.').replace(/CHATLOGURL/gi,"http://stefanbohacek.com/detective/log?id="+B.chatLogId).replace(/SHORTTITLE/,e),B.status.innerHTML="",window.open(B.shareUrl)}function n(){clearTimeout(g),g=setTimeout(function(){i()},getRandomInt(3e4,6e4))}function a(e){if(H.useLessClever===!0&&"..."!==e){e=e.toLowerCase().replace(/^(i )| i /gi," I ").trim();var t=e.replace(/([.?!])\s*(?=[A-Z])/,"$1|").split("|");1===t.length&&(e=e.replace(/\.$/,"")),5===getRandomInt(1,10)&&(e=e.replace(/(')/gi,""))}switch(getRandomInt(1,1e4)){case"1":e=e.replace("ll","l");break;case"2":e=e.replace("ss","s");break;case"3":e=e.replace("l","k");break;case"4":e=e.replace("o","p");break;case"4":e=e.replace("w","s");break;case"5":e=e.replace("s","d")}return e}function s(){C.style.display="block",Array.prototype.forEach.call(document.getElementsByClassName("share-link-shifted"),function(e,t){setTimeout(function(){e.classList.remove("share-link-shifted"),e.classList.add("share-link-unshifted")},10*t*t)})}function r(t){if(-1===H.alreadyAnswered.indexOf(e(t,!0))){"..."!==t&&H.alreadyAnswered.push(e(t,!0));var o=new XMLHttpRequest;o.open("GET","//www.botlibre.com/rest/botlibre/form-chat?instance="+H.id+"&application=155525030417300595&message="+t+(null!==H.conversationID?"&conversation="+H.conversationID:""),!0),o.onload=function(){if(o.status>=200&&o.status<400){var e=xmlToJSON(o.responseText);null===H.conversationID&&(H.conversationID=e._conversation),void 0===e.message?i():new RegExp(D.join("|")).test(e.message)===!0?r(t):l(a(e.message))}},o.onerror=function(){},o.send()}else if(t.indexOf("?")>-1)if(H.alreadyAnsweredResponses.length>0){var n=H.alreadyAnsweredResponses.splice(getRandomInt(0,H.alreadyAnsweredResponses.length-1),1);n=n[0],l(a(n))}else l("...")}function i(){var e=["..."];r(e[getRandomInt(0,e.length-1)])}function l(e){if(e=e.replace(/(RobotNotImpostor(\d)*|Jenny|linh truong|Alice)/gi,H.name),e=e.replace(/ROBOTFROM/gi,H.from),H.pendingResponses.push(e),console.log(H.pendingResponses.length),H.pendingResponses.length>0){var t=H.pendingResponses.shift(),o=t.length,n=o*getRandomInt(50,100)+getRandomInt(2e3,8e3);H.responsePending===!1?(H.responsePending=!0,setTimeout(function(){c("robot",e),H.responsePending=!1},n)):setTimeout(function(){return function(e){l(e)}(e)},1e3)}}function d(e){"unknown"!==partnerRole?(gameFinished=!0,e===partnerRole?(c("system","CORRECT"),m.emit("game over","detective won"),m.emit("I won","detective")):(c("system","INCORRECT"),m.emit("game over","detective lost"),m.emit("I lost","detective")),c("system","Game is over"),s()):(c("system","ERROR"),c("system","Too early to tell"))}function c(t,o){if(0===o.trim().length)return!1;var n=document.createElement("LI");switch(t){case"user":n.classList.add("user-message"),n.classList.add("new-message");break;case"system":switch(n.classList.add("system-message"),o){case"ERROR":case"INCORRECT":n.classList.add("error-message");break;case"CORRECT":n.classList.add("user-correct");break;default:n.classList.add("new-message")}break;case"robot":case"impostor":n.classList.add("rori-message"),n.classList.add("new-message")}var a=e(o,!0);if(a.indexOf("wiggle")>-1&&n.classList.add("wiggle-message"),a.indexOf("jump")>-1&&n.classList.add("jump-message"),n.innerHTML=o.replace(/(<([^>]+)>)/gi,""),"user"!==t&&"system"!==t&&(n.innerHTML='<span class="message-prepend">></span> '+n.innerHTML),"Game is over"===o&&"system"===t&&(n.innerHTML+='. Follow <a href="https://twitter.com/detectivelogs">@detectivelogs</a> for updates!</p>'),"robot"===t&&gameFinished===!0);else switch(O.appendChild(n),e(o,!0)){case"ilikethisgame":c("system","Oh hey, thanks!");break;case"godmode":c("system","Not in this game.")}"user"===t?I.value="":document.hasFocus()||(document.title="New message | Detective by @stefanbohacek"),document.body.scrollTop=document.body.scrollHeight,window.scrollTo(0,document.body.scrollHeight),o=e(o,!1),"user"===t&&/you.*re?.*(impostor|imposter|robot|bot)/gi.test(o)&&"detective"===userRole&&gameFinished===!1&&-1===o.indexOf("not")&&(new RegExp(["youarearobot","you'rearobot","youarerobot","yourerobot","yourearobot","you'rerobot","youaretherobot","you'retherobot"].join("|")).test(o)===!0?d("robot"):new RegExp(["youareanimposter","youareanimpostor","you'reanimposter","you'reanimpostor","youareimposter","youareimpostor","you'reimposter","you'reimpostor","youretheimposter","youretheimpostor","youreimposter","youreimpostor","youreanimposter","youreanimpostor","youaretheimposter","youaretheimpostor","you'retheimposter","you'retheimpostor"].join("|")).test(o)===!0?d("impostor"):c("system",'Please say "You are a robot" or "You are an impostor".'))}var u,m,g,h=document.getElementsByClassName("shifted-1"),p=document.getElementsByClassName("shifted"),y=document.getElementById("loading"),f=document.getElementById("you-are"),v=document.getElementById("instructions-wrapper"),w=document.getElementById("instructions"),R=document.getElementById("dismiss-instructions"),b=document.getElementById("more-info"),L=document.getElementById("role-reminder"),E=document.getElementById("message-form"),k=document.getElementById("send-message"),I=document.getElementById("message-text"),T=document.getElementById("messages-wrapper"),O=document.getElementById("messages"),C=document.getElementById("share-chat-log-wrapper"),B=(document.getElementById("what-is-this"),{triggerEl:document.getElementById("share-buttons-game"),service:null,status:document.getElementById("chat-log-url-status"),shareUrl:null,chatLogId:null}),A=["909409"],M=["your mom","not your business","none of your business","Steve","Bob","Lucy","Rita","Cletus","Rufus","Gale","Sidney","Emmie","Ethyl","Babara","Jodie","Karon","Rashida","Olen","Felisa","Nenita","Camille","Shay","Phoebe","Angelique","Monte","Exie","Lucrecia","Melodi","Marge","Zoe","Cassandra","Rosaura","Brendon","Mckinley","Lucie","Shandi","Mao","Vilma","Shara","Giselle","Royal","Dia","Ivy","Sheridan","Kandi","Juliette","Camilla","Susanna","Gary","Gertha","Britany","Marvella","Sina","Lakeesha","Sherill","Toney","Sherri","Albertina","Taren","Hildred","Erma","Lenard","Tyson","Markus","Inez","Letty","Deedra","Tammera","Stanley","Lora","Leon","Belkis","Janae","Lenna","Bronwyn","Kimbery","Debi","Bernie","Alleen","Deloise","Chiquita","Shanelle","Wynona","Kisha","Minna","Laronda","Chaya","Anabel","Leila","Arletha","Loyce","Crysta","Maegan","Valery","Hee","Ed","Mitsuko","Vincenzo","Mercedez","Janeen","Fredrick","Sharda","Dylan","Cassi","Mae","Bobbye","Lanny"],S=["Uh, where are you from?","That's prvivate.","Your mom!","I live right next to you!","...","I'm homeless","I'm homeless?"],D=["beeyotch","biatch","bitch","chinaman","chinamen","chink","crip","cunt","dago","daygo","dego","dick","douchebag","dyke","fag","fatass","fatso","gash","gimp","golliwog","gook","gyp","homo","hooker","jap","kike","kraut","lame","lardass","lesbo","negro","nigga","nigger","paki","pickaninny","pussy","raghead","retard","shemale","skank","slut","spade","spic","spook","tard","tits","titt","trannies","tranny","twat","wetback","whore","wop"],H={id:A[getRandomInt(0,A.length-1)],name:M[getRandomInt(0,M.length-1)],from:S[getRandomInt(0,S.length-1)],conversationID:null,useLessClever:Math.random()<.5?!0:!1,responsePending:!1,pendingResponses:[],alreadyAnswered:[],alreadyAnsweredResponses:["You already asked that question.","You already asked me that.","I think I already told you.","I already told you.","I already answered that.","Did you read my answer?","You already said that.","...","I told you","I literally just told you.","I just told you."]},Y=["n(i|1)+g{2,}((e|3)+r+|a)+","f+a+g+","f+(a|@)+g{2,}(o|0)+t+"],x=setTimeout(function(){gameStarted===!1&&(y.innerHTML="Still waiting...",x=setTimeout(function(){gameStarted===!1&&(y.innerHTML="Looks like nobody's around...",setTimeout(function(){gameFinished=!0,location.reload()},getRandomInt(300,3e3)))},4e4))},15e3);window.addEventListener("focus",function(){void 0!==userRole&&(document.title="You are the "+userRole+" | Detective by @stefanbohacek")},!1);var F;productionServer()?(F=io("//stefanbohacek.com/",{path:"/detective/socket.io",autoConnect:!0}),console.log(F)):F=io(document.location.protocol+"//"+document.location.host),R&&R.addEventListener("click",function(){"robot"===partnerRole&&n(),v.classList.add("shiftedUp"),E.classList.remove("hidden"),b.classList.remove("hidden"),b.classList.remove("shifted"),I.focus()}),B.triggerEl&&B.triggerEl.addEventListener("click",function(e){switch(e.preventDefault(),u=getEventTarget(e),u.getAttribute("data-url")){case"RELOAD":location.reload();break;default:null===B.shareUrl?(B.status.innerHTML="Loading...",m.emit("save_chat_log",T.innerHTML,userRole)):o()}}),h.length>0&&Array.prototype.forEach.call(h,function(e,t){setTimeout(function(){e.classList.remove("shifted-1"),e.classList.add("unshifted-1")},(200-10*t)*t)}),F.on("connected",function(){m=F}),F.on("chat_log_saved",function(e){B.chatLogId=e,o()}),F.on("error",function(e){console.log("ERROR"),console.log(e)}),F.on("game over",function(e){"detective won"===e?(c("system","YOU HAVE BEEN REVEALED"),m.emit("I lost","impostor")):(c("system","YOU FOOLED THE DETECTIVE"),m.emit("I won","impostor")),c("system","Game is over"),s()}),F.on("partner disconnected",function(e){c("system","Partner disconnected."),s(),"unknown"!==partnerRole&&"detective"===userRole&&gameFinished===!1&&c("system","You were speaking with the "+partnerRole.toUpperCase()+".")}),F.on("you are",function(e){gameStarted=!0,clearTimeout(x),userRole=e,y.classList.add("shiftedUp");var t=document.getElementsByClassName("unshifted-1");t.length>0&&Array.prototype.forEach.call(t,function(e,t){setTimeout(function(){e.classList.remove("unshifted-1"),e.classList.add("shiftedUp1")},(200-10*t)*t)}),p.length>0&&Array.prototype.forEach.call(p,function(e,t){setTimeout(function(){e.classList.remove("shifted"),e.classList.add("unshifted")},(200-10*t)*t)}),R.focus(),document.title="You are the "+userRole+" | Detective by @stefanbohacek",L.innerHTML='the <span class="highlight">'+userRole+"</span>",f.innerHTML='You are the <span class="highlight">'+userRole+"</span>",w.innerHTML="detective"===userRole?'<p>You must figure out whether you are speaking to a <span class="highlight">ROBOT</span>* or an <span class="highlight">IMPOSTOR</span>, another player pretending to be a <span class="highlight">ROBOT</span>*.</p><p>Say <em>"You are an impostor"</em> or <em>"You are a robot"</em> once you are confident with your choice.</p><p class="definition">*A <a href="http://en.wikipedia.org/wiki/Chatbot" target="_blank">chatter robot</a> is a type of conversational agent, a computer program designed to simulate an intelligent conversation with one or more human users via auditory or textual methods.</p>':'<p>You must convince the <span class="highlight">DETECTIVE</span> that he or she is speaking to a <span class="highlight">ROBOT</span>*.</p><p class="definition">*A <a href="http://en.wikipedia.org/wiki/Chatbot" target="_blank">chatter robot</a> is a type of conversational agent, a computer program designed to simulate an intelligent conversation with one or more human users via auditory or textual methods.</p>'}),F.on("paired",function(o){"robot"===o.users[0]||"robot"===o.users[1]?(partnerRole="robot",k.addEventListener("click",function(o){o.preventDefault(),t(e(I.value,!0))===!1&&(n(),gameFinished===!1?(r(I.value),c("user",I.value)):alert("Let's give the robot some rest."))})):(partnerRole="detective"===userRole?"impostor":"detective",k.addEventListener("click",function(o){o.preventDefault(),t(e(I.value,!0))===!1&&(F.emit("send message",{from:userRole,message:I.value}),c("user",I.value))}))}),F.on("message received",function(e){"unknown"===partnerRole&&(partnerRole=e.from),e.from!==userRole&&c(partnerRole,e.message)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuMS4xMy5taW4uanMiXSwibmFtZXMiOlsicmVhZHkiLCJmbiIsImRvY3VtZW50IiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcm9kdWN0aW9uU2VydmVyIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiaW5kZXhPZiIsInJlbW92ZUNsYXNzZXMiLCJlbCIsImNsYXNzTmFtZSIsImdldEV2ZW50VGFyZ2V0IiwiZSIsImV2ZW50IiwidGFyZ2V0Iiwic3JjRWxlbWVudCIsImdldFJhbmRvbUludCIsIm1pbiIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNtb290aFNjcm9sbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwYWdlWU9mZnNldCIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJnZXRUb3AiLCJlbGVtZW50Iiwibm9kZU5hbWUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJlYXNlSW5PdXRDdWJpYyIsInQiLCJwb3NpdGlvbiIsInN0YXJ0IiwiZW5kIiwiZWxhcHNlZCIsImR1cmF0aW9uIiwiY2FsbGJhY2siLCJwYXJzZUludCIsImNsb2NrIiwiRGF0ZSIsIm5vdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNldFRpbWVvdXQiLCJzdGVwIiwic2Nyb2xsIiwibGlua0hhbmRsZXIiLCJldiIsInByZXZlbnREZWZhdWx0IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0aGlzIiwiaGFzaCIsInN1YnN0cmluZyIsImEiLCJpbnRlcm5hbCIsImkiLCJsZW5ndGgiLCJ4bWxUb0pTT04iLCJ4bWxWYWx1ZSIsIngyanMiLCJYMkpTIiwianNvblZhbHVlIiwieG1sX3N0cjJqc29uIiwicmVzcG9uc2UiLCJ1c2VyUm9sZSIsInBhcnRuZXJSb2xlIiwiZ2FtZVN0YXJ0ZWQiLCJnYW1lRmluaXNoZWQiLCJvbmJlZm9yZXVubG9hZCIsImNsZWFyVGV4dCIsInRleHQiLCJyZW1vdmVQdW5jdHVhdGlvbiIsInRvTG93ZXJDYXNlIiwidHJpbSIsInJlcGxhY2UiLCJjb250YWluc09mZmVuc2l2ZUxhbmd1YWdlIiwiaiIsIm9mZmVuc2l2ZVdvcmRzIiwiUmVnRXhwIiwidGVzdCIsImFkZE1lc3NhZ2UiLCJzaGFyZUNoYXRMb2ciLCJzaGFyZUNoYXRMb2dNb2R1bGUiLCJzZXJ2aWNlIiwic2hhcmVUYXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJzaGFyZVRpdGxlIiwic2hhcmVVcmwiLCJjaGF0TG9nSWQiLCJzdGF0dXMiLCJpbm5lckhUTUwiLCJvcGVuIiwicmVzdGFydEdsb2JhbFRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiZ2xvYmFsVGltZXIiLCJwb2tlVGhlUm9ib3QiLCJsZXNzQ2xldmVyIiwicm9ib3QiLCJ1c2VMZXNzQ2xldmVyIiwidGVtcCIsInNwbGl0Iiwic2hvd1NoYXJpbmdCdXR0b25zIiwic2hhcmVDaGF0TG9nV3JhcHBlciIsInN0eWxlIiwiZGlzcGxheSIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGwiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaW5kZXgiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJjb250YWN0VGhlUm9ib3QiLCJtZXNzYWdlIiwiYWxyZWFkeUFuc3dlcmVkIiwicHVzaCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsImlkIiwiY29udmVyc2F0aW9uSUQiLCJvbmxvYWQiLCJyZXNwIiwicmVzcG9uc2VUZXh0IiwiX2NvbnZlcnNhdGlvbiIsInVuZGVmaW5lZCIsImJhZFdvcmRzIiwiam9pbiIsInJvYm90UmVzcG9uZCIsIm9uZXJyb3IiLCJzZW5kIiwiYWxyZWFkeUFuc3dlcmVkUmVzcG9uc2VzIiwiYW5ub3llZE1lc3NhZ2UiLCJzcGxpY2UiLCJzZW5kVGV4dCIsIm5hbWUiLCJmcm9tIiwicGVuZGluZ1Jlc3BvbnNlcyIsImNvbnNvbGUiLCJsb2ciLCJuZXh0TWVzc2FnZSIsInNoaWZ0IiwibmV4dE1lc3NhZ2VMZW5ndGgiLCJuZXh0TWVzc2FnZURlbGF5IiwicmVzcG9uc2VQZW5kaW5nIiwicmV2ZWFsSW1wb3N0b3IiLCJkZXRlY3RpdmVHdWVzcyIsImdsb2JhbFNvY2tldCIsImVtaXQiLCJtZXNzYWdlRnJvbSIsIm1lc3NhZ2VUZXh0IiwibmV3TWVzc2FnZSIsImNyZWF0ZUVsZW1lbnQiLCJmdW5TdHVmZiIsIm1lc3NhZ2VzIiwiYXBwZW5kQ2hpbGQiLCJtZXNzYWdlVGV4dElucHV0IiwidmFsdWUiLCJoYXNGb2N1cyIsInRpdGxlIiwiYm9keSIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsInNjcm9sbFRvIiwic2hpZnRlZEVsczEiLCJzaGlmdGVkRWxzIiwibG9hZGluZ0luZGljYXRvciIsInlvdUFyZSIsImluc3RydWN0aW9uc1dyYXBwZXIiLCJpbnN0cnVjdGlvbnMiLCJkaXNtaXNzSW5zdHJ1Y3Rpb25zQnV0dG9uIiwibW9yZUluZm8iLCJyb2xlUmVtaW5kZXIiLCJtZXNzYWdlRm9ybSIsInNlbmRNZXNzYWdlQnV0dG9uIiwibWVzc2FnZXNXcmFwcGVyIiwidHJpZ2dlckVsIiwicm9ib3RJRHMiLCJuYW1lcyIsInBsYWNlc1ByaXZhdGUiLCJnbG9iYWxUaW1lcldhaXRpbmciLCJyZWxvYWQiLCJzb2NrZXQiLCJpbyIsInBhdGgiLCJhdXRvQ29ubmVjdCIsInByb3RvY29sIiwiaG9zdCIsImZvY3VzIiwib24iLCJkYXRhIiwidG9VcHBlckNhc2UiLCJ1bnNoaWZ0ZWRFbHMxIiwidXNlcnMiLCJhbGVydCJdLCJtYXBwaW5ncyI6IkFBQUEsUUFrRUEsU0FBU0EsT0FBTUMsR0FDZSxZQUF4QkMsU0FBU0MsV0FDWEYsSUFFQUMsU0FBU0UsaUJBQWlCLG1CQUFvQkgsR0FJbEQsUUFBU0ksb0JBQ1AsTUFBUUMsUUFBT0MsU0FBU0MsS0FBS0MsUUFBUSxxQkFBdUIsR0FHOUQsUUFBU0MsZUFBY0MsR0FDckJBLEVBQUdDLFVBQVksR0FJakIsUUFBU0MsZ0JBQWVD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RUZDLEdBQ0UsV0FDQSxvQkFDQSx3QkFDQSxRQUNBLE1BQ0EsT0FDQSxPQUNBLFNBQ0EsUUFDQSxPQUNBLFNBQ0EsUUFDQSxRQUNBLFNBQ0EsUUFDQSxRQUNBLFVBQ0EsT0FDQSxTQUNBLFNBQ0EsVUFDQSxPQUNBLFNBQ0EsWUFDQSxRQUNBLE9BQ0EsV0FDQSxTQUNBLFFBQ0EsTUFDQSxZQUNBLFVBQ0EsVUFDQSxXQUNBLFFBQ0EsU0FDQSxNQUNBLFFBQ0EsUUFDQSxVQUNBLFFBQ0EsTUFDQSxNQUNBLFdBQ0EsUUFDQSxXQUNBLFVBQ0EsVUFDQSxPQUNBLFNBQ0EsVUFDQSxXQUNBLE9BQ0EsV0FDQSxVQUNBLFFBQ0EsU0FDQSxZQUNBLFFBQ0EsVUFDQSxPQUNBLFNBQ0EsUUFDQSxTQUNBLE9BQ0EsUUFDQSxTQUNBLFVBQ0EsVUFDQSxPQUNBLE9BQ0EsU0FDQSxRQUNBLFFBQ0EsVUFDQSxVQUNBLE9BQ0EsU0FDQSxTQUNBLFVBQ0EsV0FDQSxXQUNBLFNBQ0EsUUFDQSxRQUNBLFVBQ0EsUUFDQSxTQUNBLFFBQ0EsVUFDQSxRQUNBLFNBQ0EsU0FDQSxTQUNBLE1BQ0EsS0FDQSxVQUNBLFdBQ0EsV0FDQSxTQUNBLFdBQ0EsU0FDQSxRQUNBLFFBQ0EsTUFDQSxTQUNBLFNBT0ZDLEdBQ0EsMEJBQ0EsbUJBQ0EsWUFDQSw0QkFDQSxNQUNBLGVBQ0EsaUJBRUFyRCxHQUlFLFdBQ0EsU0FDQSxRQUNBLFdBQ0EsV0FDQSxRQUNBLE9BQ0EsT0FDQSxPQUNBLFFBQ0EsT0FDQSxPQUNBLFlBQ0EsT0FDQSxNQUNBLFNBQ0EsUUFDQSxPQUNBLE9BQ0EsV0FDQSxPQUNBLE1BQ0EsT0FDQSxTQUNBLE1BQ0EsT0FDQSxRQUNBLE9BQ0EsVUFDQSxRQUNBLFFBQ0EsUUFDQSxTQUNBLE9BQ0EsYUFDQSxRQUNBLFVBQ0EsU0FDQSxVQUNBLFFBQ0EsT0FDQSxRQUNBLE9BQ0EsUUFDQSxPQUNBLE9BQ0EsT0FDQSxXQUNBLFNBQ0EsT0FDQSxVQUNBLFFBQ0EsT0FFRjlCLEdBQ0V1QixHQUFJMEQsRUFBU3RLLGFBQWEsRUFBR3NLLEVB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VyxJQUN6RXlCLEVBQU9sQyxLQUFLLGdCQUNSWixLQUFNekUsU0FDTm1ELFFBQVMwQyxFQUFpQkMsUUFHOUI5RSxFQUFXLE9BQVE2RSxFQUFpQkMsYUFPNUN5QixFQUFPTyxHQUFHLG1CQUFvQixTQUFTQyxHQUNqQixZQUFoQjlILGNBQ0ZBLFlBQWM4SCxFQUFLdEQsTUFFakJzRCxFQUFLdEQsT0FBU3pFLFVBQ2hCZ0IsRUFBV2YsWUFBYThILEVBQUs1RSIsImZpbGUiOiJzY3JpcHRzLjEuMTMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJzdHJpY3RcIjtcbi8qXG4gIGh0dHBzOi8vZ2l0aHViLmNvbS9hbGljZWxpZXV0aWVyL3Ntb290aFNjcm9sbFxuKi9cbndpbmRvdy5zbW9vdGhTY3JvbGwgPSAoZnVuY3Rpb24oKXtcbmlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgPT09IHZvaWQgMCB8fCB3aW5kb3cucGFnZVlPZmZzZXQgPT09IHZvaWQgMCB8fCBoaXN0b3J5LnB1c2hTdGF0ZSA9PT0gdm9pZCAwKSB7IHJldHVybjsgfVxudmFyIGdldFRvcCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICBpZihlbGVtZW50Lm5vZGVOYW1lID09PSAnSFRNTCcpe1xuICAgICAgcmV0dXJuIC13aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgfSBcbiAgICByZXR1cm4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQ7XG59O1xudmFyIGVhc2VJbk91dEN1YmljID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQ8MC41ID8gNCp0KnQqdCA6ICh0LTEpKigyKnQtMikqKDIqdC0yKSsxOyB9O1xudmFyIHBvc2l0aW9uID0gZnVuY3Rpb24oc3RhcnQsIGVuZCwgZWxhcHNlZCwgZHVyYXRpb24pIHtcbiAgICBpZiAoZWxhcHNlZCA+IGR1cmF0aW9uKXtcbiAgICAgIHJldHVybiBlbmQ7XG4gICAgfSBcbiAgICByZXR1cm4gc3RhcnQgKyAoZW5kIC0gc3RhcnQpICogZWFzZUluT3V0Q3ViaWMoZWxhcHNlZCAvIGR1cmF0aW9uKTtcbn07XG52YXIgc21vb3RoU2Nyb2xsID0gZnVuY3Rpb24oZWwsIGR1cmF0aW9uLCBjYWxsYmFjayl7XG4gICAgZHVyYXRpb24gPSBkdXJhdGlvbiB8fCA1MDA7XG4gICAgdmFyIHN0YXJ0ID0gd2luZG93LnBhZ2VZT2Zmc2V0LFxuICAgICAgICBlbmQ7XG4gICAgaWYgKHR5cGVvZiBlbCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGVuZCA9IHBhcnNlSW50KGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5kID0gZ2V0VG9wKGVsKTtcbiAgICB9XG4gICAgdmFyIGNsb2NrID0gRGF0ZS5ub3coKTtcbiAgICB2YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgZnVuY3Rpb24oZm4pe3dpbmRvdy5zZXRUaW1lb3V0KGZuLCAxNSk7fTtcbiAgICB2YXIgc3RlcCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBlbGFwc2VkID0gRGF0ZS5ub3coKSAtIGNsb2NrO1xuICAgICAgICB3aW5kb3cuc2Nyb2xsKDAsIHBvc2l0aW9uKHN0YXJ0LCBlbmQsIGVsYXBzZWQsIGR1cmF0aW9uKSk7XG4gICAgICAgIGlmIChlbGFwc2VkID4gZHVyYXRpb24pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHN0ZXAoKTtcbn07XG52YXIgbGlua0hhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgc21vb3RoU2Nyb2xsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaGFzaC5zdWJzdHJpbmcoMSkpLCA1MDAsIGZ1bmN0aW9uKGVsKSB7XG4gICAgfSk7XG59O1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnRlcm5hbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FbaHJlZl49XCIjXCJdJyksIGE7XG4gICAgZm9yKHZhciBpPWludGVybmFsLmxlbmd0aDsgYT1pbnRlcm5hbFstLWldOyl7XG4gICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGxpbmtIYW5kbGVyLCBmYWxzZSk7XG4gICAgfVxufSk7XG5yZXR1cm4gc21vb3RoU2Nyb2xsO1xufSkoKTtcblxudmFyIHhtbFRvSlNPTiA9IGZ1bmN0aW9uKHhtbFZhbHVlKSB7XG4gIHZhciB4MmpzID0gbmV3IFgySlMoKSxcbiAgICAgIGpzb25WYWx1ZSA9IHgyanMueG1sX3N0cjJqc29uKHhtbFZhbHVlKTtcbiAganNvblZhbHVlID0ganNvblZhbHVlLnJlc3BvbnNlO1xuICByZXR1cm4ganNvblZhbHVlO1xufTtcblxuZnVuY3Rpb24gcmVhZHkoZm4pIHtcbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICdsb2FkaW5nJyl7XG4gICAgZm4oKTtcbiAgfSBlbHNlIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZm4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHByb2R1Y3Rpb25TZXJ2ZXIoKXtcbiAgcmV0dXJuICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCdzdGVmYW5ib2hhY2VrLmNvbScpID4gLTEpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVDbGFzc2VzKGVsKXtcbiAgZWwuY2xhc3NOYW1lID0gJyc7XG59XG5cbi8vaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81MTE2OTI5L2dldC1jbGlja2VkLWxpLWZyb20tdWwtb25jbGlja1xuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXQoZSkge1xuICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gIHJldHVybiBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7IFxufVxuXG4vL2h0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTUyNzgwMy9nZW5lcmF0aW5nLXJhbmRvbS1udW1iZXJzLWluLWphdmFzY3JpcHQtaW4tYS1zcGVjaWZpYy1yYW5nZVxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiwgbWF4KSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xufVxuXG52YXIgdXNlclJvbGUsIC8vIHJvYm90IG9yIGltcG9zdG9yXG4gICAgcGFydG5lclJvbGUgPSAndW5rbm93bicsXG4gICAgZ2FtZVN0YXJ0ZWQgPSBmYWxzZSxcbiAgICBnYW1lRmluaXNoZWQgPSBmYWxzZTtcblxuXG53aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbihlKSB7XG4gIGlmIChnYW1lRmluaXNoZWQgPT09IGZhbHNlKXtcbiAgICByZXR1cm4gJ0FyZSB5b3Ugc3VyZT8nO1xuICB9XG59O1xuXG5cbnJlYWR5KGZ1bmN0aW9uKCl7XG4gIHZhciBzaGlmdGVkRWxzMSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NoaWZ0ZWQtMScpLFxuICAgICAgc2hpZnRlZEVscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NoaWZ0ZWQnKSxcbiAgICAgIGxvYWRpbmdJbmRpY2F0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZycpLFxuICAgICAgeW91QXJlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3lvdS1hcmUnKSxcbiAgICAgIGluc3RydWN0aW9uc1dyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdHJ1Y3Rpb25zLXdyYXBwZXInKSxcbiAgICAgIGluc3RydWN0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnN0cnVjdGlvbnMnKSxcbiAgICAgIGRpc21pc3NJbnN0cnVjdGlvbnNCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzbWlzcy1pbnN0cnVjdGlvbnMnKSxcbiAgICAgIG1vcmVJbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vcmUtaW5mbycpLFxuICAgICAgcm9sZVJlbWluZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JvbGUtcmVtaW5kZXInKSxcbiAgICAgIG1lc3NhZ2VGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lc3NhZ2UtZm9ybScpLFxuICAgICAgc2VuZE1lc3NhZ2VCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VuZC1tZXNzYWdlJyksXG4gICAgICBtZXNzYWdlVGV4dElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lc3NhZ2UtdGV4dCcpLFxuICAgICAgbWVzc2FnZXNXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lc3NhZ2VzLXdyYXBwZXInKSxcbiAgICAgIG1lc3NhZ2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lc3NhZ2VzJyksXG4gICAgICBzaGFyZUNoYXRMb2dXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoYXJlLWNoYXQtbG9nLXdyYXBwZXInKSxcbiAgICAgIHdoYXRJc1RoaXNMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3doYXQtaXMtdGhpcycpLFxuLy8gICAgICByZXF1ZXN0Tm90aWZpY2F0aW9uUGVybWlzc2lvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXF1ZXN0LW5vdGlmaWNhdGlvbi1wZXJtaXNzaW9uJyksXG4gICAgICBzaGFyZUNoYXRMb2dNb2R1bGUgPSB7XG4gICAgICAgIHRyaWdnZXJFbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoYXJlLWJ1dHRvbnMtZ2FtZScpLFxuICAgICAgICBzZXJ2aWNlOiBudWxsLFxuICAgICAgICBzdGF0dXM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0LWxvZy11cmwtc3RhdHVzJyksXG4gICAgICAgIHNoYXJlVXJsOiBudWxsLFxuICAgICAgICBjaGF0TG9nSWQ6IG51bGxcbiAgICAgIH0sXG4gICAgICByb2JvdElEcyA9IFtcbiAgICAgICAgLy8gJzM3JyxcbiAgICAgICAgJzkwOTQwOSdcbiAgICAgIF0sXG4gICAgICBuYW1lcyA9IFtcbiAgICAgICAgJ3lvdXIgbW9tJyxcbiAgICAgICAgJ25vdCB5b3VyIGJ1c2luZXNzJyxcbiAgICAgICAgJ25vbmUgb2YgeW91ciBidXNpbmVzcycsXG4gICAgICAgICdTdGV2ZScsXG4gICAgICAgICdCb2InLFxuICAgICAgICAnTHVjeScsXG4gICAgICAgICdSaXRhJyxcbiAgICAgICAgJ0NsZXR1cycsIMKgXG4gICAgICAgICdSdWZ1cycsIMKgXG4gICAgICAgICdHYWxlJywgwqBcbiAgICAgICAgJ1NpZG5leScsIMKgXG4gICAgICAgICdFbW1pZScsIMKgXG4gICAgICAgICdFdGh5bCcsIMKgXG4gICAgICAgICdCYWJhcmEnLCDCoFxuICAgICAgICAnSm9kaWUnLCDCoFxuICAgICAgICAnS2Fyb24nLCDCoFxuICAgICAgICAnUmFzaGlkYScsIMKgXG4gICAgICAgICdPbGVuJywgwqBcbiAgICAgICAgJ0ZlbGlzYScsIMKgXG4gICAgICAgICdOZW5pdGEnLCDCoFxuICAgICAgICAnQ2FtaWxsZScsIMKgXG4gICAgICAgICdTaGF5JywgwqBcbiAgICAgICAgJ1Bob2ViZScsIMKgXG4gICAgICAgICdBbmdlbGlxdWUnLCDCoFxuICAgICAgICAnTW9udGUnLCDCoFxuICAgICAgICAnRXhpZScsIMKgXG4gICAgICAgICdMdWNyZWNpYScsIMKgXG4gICAgICAgICdNZWxvZGknLCDCoFxuICAgICAgICAnTWFyZ2UnLCDCoFxuICAgICAgICAnWm9lJywgwqBcbiAgICAgICAgJ0Nhc3NhbmRyYScsIMKgXG4gICAgICAgICdSb3NhdXJhJywgwqBcbiAgICAgICAgJ0JyZW5kb24nLCDCoFxuICAgICAgICAnTWNraW5sZXknLCDCoFxuICAgICAgICAnTHVjaWUnLCDCoFxuICAgICAgICAnU2hhbmRpJywgwqBcbiAgICAgICAgJ01hbycsIMKgXG4gICAgICAgICdWaWxtYScsIMKgXG4gICAgICAgICdTaGFyYScsIMKgXG4gICAgICAgICdHaXNlbGxlJywgwqBcbiAgICAgICAgJ1JveWFsJywgwqBcbiAgICAgICAgJ0RpYScsIMKgXG4gICAgICAgICdJdnknLCDCoFxuICAgICAgICAnU2hlcmlkYW4nLCDCoFxuICAgICAgICAnS2FuZGknLCDCoFxuICAgICAgICAnSnVsaWV0dGUnLCDCoFxuICAgICAgICAnQ2FtaWxsYScsIMKgXG4gICAgICAgICdTdXNhbm5hJywgwqBcbiAgICAgICAgJ0dhcnknLCDCoFxuICAgICAgICAnR2VydGhhJywgwqBcbiAgICAgICAgJ0JyaXRhbnknLCDCoFxuICAgICAgICAnTWFydmVsbGEnLCDCoFxuICAgICAgICAnU2luYScsIMKgXG4gICAgICAgICdMYWtlZXNoYScsIMKgXG4gICAgICAgICdTaGVyaWxsJywgwqBcbiAgICAgICAgJ1RvbmV5JywgwqBcbiAgICAgICAgJ1NoZXJyaScsXG4gICAgICAgICdBbGJlcnRpbmEnLCDCoFxuICAgICAgICAnVGFyZW4nLCDCoFxuICAgICAgICAnSGlsZHJlZCcsIMKgXG4gICAgICAgICdFcm1hJywgwqBcbiAgICAgICAgJ0xlbmFyZCcsIMKgXG4gICAgICAgICdUeXNvbicsIMKgXG4gICAgICAgICdNYXJrdXMnLCDCoFxuICAgICAgICAnSW5leicsIMKgXG4gICAgICAgICdMZXR0eScsIMKgXG4gICAgICAgICdEZWVkcmEnLCDCoFxuICAgICAgICAnVGFtbWVyYScsIMKgXG4gICAgICAgICdTdGFubGV5JywgwqBcbiAgICAgICAgJ0xvcmEnLCDCoFxuICAgICAgICAnTGVvbicsIMKgXG4gICAgICAgICdCZWxraXMnLCDCoFxuICAgICAgICAnSmFuYWUnLCDCoFxuICAgICAgICAnTGVubmEnLCDCoFxuICAgICAgICAnQnJvbnd5bicsIMKgXG4gICAgICAgICdLaW1iZXJ5JywgwqBcbiAgICAgICAgJ0RlYmknLCDCoFxuICAgICAgICAnQmVybmllJywgwqBcbiAgICAgICAgJ0FsbGVlbicsIMKgXG4gICAgICAgICdEZWxvaXNlJywgwqBcbiAgICAgICAgJ0NoaXF1aXRhJywgwqBcbiAgICAgICAgJ1NoYW5lbGxlJywgwqBcbiAgICAgICAgJ1d5bm9uYScsIMKgXG4gICAgICAgICdLaXNoYScsIMKgXG4gICAgICAgICdNaW5uYScsIMKgXG4gICAgICAgICdMYXJvbmRhJywgwqBcbiAgICAgICAgJ0NoYXlhJywgwqBcbiAgICAgICAgJ0FuYWJlbCcsIMKgXG4gICAgICAgICdMZWlsYScsIMKgXG4gICAgICAgICdBcmxldGhhJywgwqBcbiAgICAgICAgJ0xveWNlJywgwqBcbiAgICAgICAgJ0NyeXN0YScsIMKgXG4gICAgICAgICdNYWVnYW4nLCDCoFxuICAgICAgICAnVmFsZXJ5JywgwqBcbiAgICAgICAgJ0hlZScsIMKgXG4gICAgICAgICdFZCcsIMKgXG4gICAgICAgICdNaXRzdWtvJywgwqBcbiAgICAgICAgJ1ZpbmNlbnpvJywgwqBcbiAgICAgICAgJ01lcmNlZGV6JywgwqBcbiAgICAgICAgJ0phbmVlbicsIMKgXG4gICAgICAgICdGcmVkcmljaycsIMKgXG4gICAgICAgICdTaGFyZGEnLCDCoFxuICAgICAgICAnRHlsYW4nLCDCoFxuICAgICAgICAnQ2Fzc2knLCDCoFxuICAgICAgICAnTWFlJywgwqBcbiAgICAgICAgJ0JvYmJ5ZScsIMKgXG4gICAgICAgICdMYW5ueScgICBcbiAgICAgIF0sXG4gICAgICBwbGFjZXMgPSBbXG4gICAgICAnUm9ib3QgZmFjdG9yeScsXG4gICAgICAnTmV3IFlvcmsnLFxuICAgICAgJ0Jyb29rbHluJ1xuICAgICAgXSxcbiAgICAgIHBsYWNlc1ByaXZhdGUgPSBbXG4gICAgICAnVWgsIHdoZXJlIGFyZSB5b3UgZnJvbT8nLFxuICAgICAgJ1RoYXRcXCdzIHBydml2YXRlLicsXG4gICAgICAnWW91ciBtb20hJyxcbiAgICAgICdJIGxpdmUgcmlnaHQgbmV4dCB0byB5b3UhJyxcbiAgICAgICcuLi4nLFxuICAgICAgJ0lcXCdtIGhvbWVsZXNzJyxcbiAgICAgICdJXFwnbSBob21lbGVzcz8nXG4gICAgICBdLFxuICAgICAgYmFkV29yZHMgPSBbXG4vKlxuICAgICAgSW1wb3J0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZGFyaXVzay93b3JkZmlsdGVyLlxuKi8gICAgICBcbiAgICAgICAgXCJiZWV5b3RjaFwiLFxuICAgICAgICBcImJpYXRjaFwiLFxuICAgICAgICBcImJpdGNoXCIsXG4gICAgICAgIFwiY2hpbmFtYW5cIixcbiAgICAgICAgXCJjaGluYW1lblwiLFxuICAgICAgICBcImNoaW5rXCIsXG4gICAgICAgIFwiY3JpcFwiLFxuICAgICAgICBcImN1bnRcIixcbiAgICAgICAgXCJkYWdvXCIsXG4gICAgICAgIFwiZGF5Z29cIixcbiAgICAgICAgXCJkZWdvXCIsXG4gICAgICAgIFwiZGlja1wiLFxuICAgICAgICBcImRvdWNoZWJhZ1wiLFxuICAgICAgICBcImR5a2VcIixcbiAgICAgICAgXCJmYWdcIixcbiAgICAgICAgXCJmYXRhc3NcIixcbiAgICAgICAgXCJmYXRzb1wiLFxuICAgICAgICBcImdhc2hcIixcbiAgICAgICAgXCJnaW1wXCIsXG4gICAgICAgIFwiZ29sbGl3b2dcIixcbiAgICAgICAgXCJnb29rXCIsXG4gICAgICAgIFwiZ3lwXCIsXG4gICAgICAgIFwiaG9tb1wiLFxuICAgICAgICBcImhvb2tlclwiLFxuICAgICAgICBcImphcFwiLFxuICAgICAgICBcImtpa2VcIixcbiAgICAgICAgXCJrcmF1dFwiLFxuICAgICAgICBcImxhbWVcIixcbiAgICAgICAgXCJsYXJkYXNzXCIsXG4gICAgICAgIFwibGVzYm9cIixcbiAgICAgICAgXCJuZWdyb1wiLFxuICAgICAgICBcIm5pZ2dhXCIsXG4gICAgICAgIFwibmlnZ2VyXCIsXG4gICAgICAgIFwicGFraVwiLFxuICAgICAgICBcInBpY2thbmlubnlcIixcbiAgICAgICAgXCJwdXNzeVwiLFxuICAgICAgICBcInJhZ2hlYWRcIixcbiAgICAgICAgXCJyZXRhcmRcIixcbiAgICAgICAgXCJzaGVtYWxlXCIsXG4gICAgICAgIFwic2thbmtcIixcbiAgICAgICAgXCJzbHV0XCIsXG4gICAgICAgIFwic3BhZGVcIixcbiAgICAgICAgXCJzcGljXCIsXG4gICAgICAgIFwic3Bvb2tcIixcbiAgICAgICAgXCJ0YXJkXCIsXG4gICAgICAgIFwidGl0c1wiLFxuICAgICAgICBcInRpdHRcIixcbiAgICAgICAgXCJ0cmFubmllc1wiLFxuICAgICAgICBcInRyYW5ueVwiLFxuICAgICAgICBcInR3YXRcIixcbiAgICAgICAgXCJ3ZXRiYWNrXCIsXG4gICAgICAgIFwid2hvcmVcIixcbiAgICAgICAgXCJ3b3BcIlxuICAgICAgXSxcbiAgICAgIHJvYm90ID0ge1xuICAgICAgICBpZDogcm9ib3RJRHNbZ2V0UmFuZG9tSW50KDAsIHJvYm90SURzLmxlbmd0aCAtIDEpXSxcbiAgICAgICAgbmFtZTogbmFtZXNbZ2V0UmFuZG9tSW50KDAsIG5hbWVzLmxlbmd0aCAtIDEpXSxcbiAgICAgICAgZnJvbTogcGxhY2VzUHJpdmF0ZVtnZXRSYW5kb21JbnQoMCwgcGxhY2VzUHJpdmF0ZS5sZW5ndGggLSAxKV0sXG4gICAgICAgIGNvbnZlcnNhdGlvbklEOiBudWxsLFxuICAgICAgICB1c2VMZXNzQ2xldmVyOiBNYXRoLnJhbmRvbSgpIDwgMC41ID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICByZXNwb25zZVBlbmRpbmc6IGZhbHNlLFxuICAgICAgICBwZW5kaW5nUmVzcG9uc2VzOiBbXSxcbiAgICAgICAgYWxyZWFkeUFuc3dlcmVkOiBbXSxcbiAgICAgICAgYWxyZWFkeUFuc3dlcmVkUmVzcG9uc2VzOiBbXG4gICAgICAgICAgJ1lvdSBhbHJlYWR5IGFza2VkIHRoYXQgcXVlc3Rpb24uJyxcbiAgICAgICAgICAnWW91IGFscmVhZHkgYXNrZWQgbWUgdGhhdC4nLFxuICAgICAgICAgICdJIHRoaW5rIEkgYWxyZWFkeSB0b2xkIHlvdS4nLFxuICAgICAgICAgICdJIGFscmVhZHkgdG9sZCB5b3UuJyxcbiAgICAgICAgICAnSSBhbHJlYWR5IGFuc3dlcmVkIHRoYXQuJyxcbiAgICAgICAgICAnRGlkIHlvdSByZWFkIG15IGFuc3dlcj8nLFxuICAgICAgICAgICdZb3UgYWxyZWFkeSBzYWlkIHRoYXQuJyxcbiAgICAgICAgICAnLi4uJyxcbiAgICAgICAgICAnSSB0b2xkIHlvdScsXG4gICAgICAgICAgJ0kgbGl0ZXJhbGx5IGp1c3QgdG9sZCB5b3UuJyxcbiAgICAgICAgICAnSSBqdXN0IHRvbGQgeW91LidcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIG9mZmVuc2l2ZVdvcmRzID0gW1xuICAgICAgICAnbihpfDEpK2d7Mix9KChlfDMpK3IrfGEpKycsXG4gICAgICAgICdmK2ErZysnLFxuICAgICAgICAnZisoYXxAKStnezIsfShvfDApK3QrJ1xuICAgICAgXSxcbiAgICAgIHNoYXJlVGFyZ2V0LFxuICAgICAgZ2xvYmFsU29ja2V0LFxuICAgICAgZ2xvYmFsVGltZXIsXG4gICAgICBnbG9iYWxUaW1lcldhaXRpbmcgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmIChnYW1lU3RhcnRlZCA9PT0gZmFsc2Upe1xuICAgICAgICAgIGxvYWRpbmdJbmRpY2F0b3IuaW5uZXJIVE1MID0gJ1N0aWxsIHdhaXRpbmcuLi4nO1xuICAgICAgICAgIGdsb2JhbFRpbWVyV2FpdGluZyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmIChnYW1lU3RhcnRlZCA9PT0gZmFsc2Upe1xuICAgICAgICAgICAgICBsb2FkaW5nSW5kaWNhdG9yLmlubmVySFRNTCA9ICdMb29rcyBsaWtlIG5vYm9keVxcJ3MgYXJvdW5kLi4uJztcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGdhbWVGaW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgIH0sIGdldFJhbmRvbUludCgzMDAsIDMwMDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCA0MDAwMCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDE1MDAwKTtcblxuLy8gIHZhciBOb3RpZmljYXRpb24gPSB3aW5kb3cuTm90aWZpY2F0aW9uIHx8IHdpbmRvdy5tb3pOb3RpZmljYXRpb24gfHwgd2luZG93LndlYmtpdE5vdGlmaWNhdGlvbjtcblxuICBmdW5jdGlvbiBjbGVhclRleHQodGV4dCwgcmVtb3ZlUHVuY3R1YXRpb24pe1xuICAgIHRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCkudHJpbSgpLnJlcGxhY2UoLyAvZywnJyk7XG4gICAgaWYgKHJlbW92ZVB1bmN0dWF0aW9uID09PSB0cnVlKXtcbiAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1suLD8hXFxzLF0vZywgJycpO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG5cbmZ1bmN0aW9uIGNvbnRhaW5zT2ZmZW5zaXZlTGFuZ3VhZ2UodGV4dCl7XG4gIGZvciAodmFyIGk9MCwgaj1vZmZlbnNpdmVXb3Jkcy5sZW5ndGg7IGk8ajsgaSsrKXtcbiAgICBpZiAobmV3IFJlZ0V4cChvZmZlbnNpdmVXb3Jkc1tpXSwgJ2dpJykudGVzdCh0ZXh0LnJlcGxhY2UoL1xcVy9nLCAnJykpID09PSB0cnVlKXtcbiAgICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdFUlJPUicpOyAgICAgIFxuICAgICAgYWRkTWVzc2FnZSgnc3lzdGVtJywgJ1VuYWJsZSB0byBzZW5kIG1lc3NhZ2UnKTsgICAgICBcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbiAgZnVuY3Rpb24gc2hhcmVDaGF0TG9nKCl7XG4gICAgc2hhcmVDaGF0TG9nTW9kdWxlLnNlcnZpY2UgPSBzaGFyZVRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VydmljZScpO1xuXG4gICAgdmFyIHNoYXJlVGl0bGUgPSAnUGxheSBEZXRlY3RpdmUsIGEgZ2FtZSBieSBAc3RlZmFuYm9oYWNlayc7XG4gICAgaWYgKHNoYXJlQ2hhdExvZ01vZHVsZS5zZXJ2aWNlICE9PSBudWxsICYmIHNoYXJlQ2hhdExvZ01vZHVsZS5zZXJ2aWNlID09PSAncmVkZGl0Jyl7XG4gICAgICBzaGFyZVRpdGxlID0gJ1tsb2ddIFRJVExFJztcbiAgICB9XG5cbiAgICBzaGFyZUNoYXRMb2dNb2R1bGUuc2hhcmVVcmwgPSBzaGFyZVRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJylcbiAgICAgIC5yZXBsYWNlKC9ERVNDUklQVElPTi8sICdEZXRlY3RpdmU6IEEgXCJyZXZlcnNlIFR1cmluZyB0ZXN0XCIgY2hhdCBnYW1lLicpXG4gICAgICAucmVwbGFjZSgvQ0hBVExPR1VSTC9naSwgJ2h0dHA6Ly9zdGVmYW5ib2hhY2VrLmNvbS9kZXRlY3RpdmUvbG9nP2lkPScgKyBzaGFyZUNoYXRMb2dNb2R1bGUuY2hhdExvZ0lkKVxuICAgICAgLnJlcGxhY2UoL1NIT1JUVElUTEUvLCBzaGFyZVRpdGxlKTtcblxuXG4gICAgc2hhcmVDaGF0TG9nTW9kdWxlLnN0YXR1cy5pbm5lckhUTUwgPSAnJztcbiAgICB3aW5kb3cub3BlbihzaGFyZUNoYXRMb2dNb2R1bGUuc2hhcmVVcmwpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzdGFydEdsb2JhbFRpbWVyKCl7XG4gICAgY2xlYXJUaW1lb3V0KGdsb2JhbFRpbWVyKTtcbiAgICBnbG9iYWxUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHBva2VUaGVSb2JvdCgpO1xuICAgIH0sIGdldFJhbmRvbUludCgzMDAwMCwgNjAwMDApKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlc3NDbGV2ZXIodGV4dCl7XG4gICAgaWYgKHJvYm90LnVzZUxlc3NDbGV2ZXIgPT09IHRydWUgJiYgdGV4dCAhPT0gJy4uLicpe1xuICAgICAgdGV4dCA9IHRleHQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eKGkgKXwgaSAvaWcsXCIgSSBcIikudHJpbSgpO1xuICAgICAgdmFyIHRlbXAgPSB0ZXh0LnJlcGxhY2UoLyhbLj8hXSlcXHMqKD89W0EtWl0pLywgXCIkMXxcIikuc3BsaXQoXCJ8XCIpO1xuXG4gICAgICBpZiAodGVtcC5sZW5ndGggPT09IDEpe1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXC4kLywgXCJcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChnZXRSYW5kb21JbnQoMSwgMTApID09PSA1KXtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvKCcpL2dpLCBcIlwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKGdldFJhbmRvbUludCgxLCAxMDAwMCkpe1xuICAgICAgY2FzZSAnMSc6XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoJ2xsJywgJ2wnKTtcbiAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnMic6XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoJ3NzJywgJ3MnKTtcbiAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnMyc6XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoJ2wnLCAnaycpO1xuICAgICAgYnJlYWs7XG4gICAgICBjYXNlICc0JzpcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgnbycsICdwJyk7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJzQnOlxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCd3JywgJ3MnKTtcbiAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnNSc6XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoJ3MnLCAnZCcpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja1JvbGUobWVzc2FnZSl7XG5cbiAgfVxuXG5cbiAgZnVuY3Rpb24gc2hvd1NoYXJpbmdCdXR0b25zKCl7XG4gICAgc2hhcmVDaGF0TG9nV3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAvL1RPRE86IFRoaXMgc2hvdWxkIGJlIGEgZnVuY3Rpb24sIGVnIHJlbW92ZUNsYXNzU3RhZ2dlcmVkKGNsYXNzKVxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2hhcmUtbGluay1zaGlmdGVkJyksIGZ1bmN0aW9uKGVsLCBpbmRleCkge1xuICAgICAgc2V0VGltZW91dChcbiAgICAgICAgZnVuY3Rpb24oKXtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzaGFyZS1saW5rLXNoaWZ0ZWQnKTtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdzaGFyZS1saW5rLXVuc2hpZnRlZCcpO1xuICAgICAgICB9LFxuICAgICAgICAoKDEwKmluZGV4KSkqaW5kZXgpO1xuICAgIH0pOyAgICBcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnRhY3RUaGVSb2JvdChtZXNzYWdlKXtcbiAgICBpZiAocm9ib3QuYWxyZWFkeUFuc3dlcmVkLmluZGV4T2YoY2xlYXJUZXh0KG1lc3NhZ2UsIHRydWUpKSA9PT0gLTEpe1xuICAgICAgaWYgKG1lc3NhZ2UgIT09ICcuLi4nKXtcbiAgICAgICAgcm9ib3QuYWxyZWFkeUFuc3dlcmVkLnB1c2goY2xlYXJUZXh0KG1lc3NhZ2UsIHRydWUpKTtcbiAgICAgIH1cbiAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIC8vIEJhY2tlbmQgZG9lc24ndCBzdXBwb3J0IGRhdGEgaW4gSlNPTiBmb3JtYXQsIGtlZXBpbmcgdGhpcyBoZXJlIGZvciBmdXR1cmUuXG4gIC8vICAgIHJlcXVlc3Qub3BlbignR0VUJywgJy8vd3d3LmJvdGxpYnJlLmNvbS9yZXN0L2JvdGxpYnJlL2Zvcm0tY2hhdCcgLCB0cnVlKTtcbiAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgJy8vd3d3LmJvdGxpYnJlLmNvbS9yZXN0L2JvdGxpYnJlL2Zvcm0tY2hhdD9pbnN0YW5jZT0nICsgcm9ib3QuaWQgKyAnJmFwcGxpY2F0aW9uPTE1NTUyNTAzMDQxNzMwMDU5NSZtZXNzYWdlPScgKyBtZXNzYWdlICsgKHJvYm90LmNvbnZlcnNhdGlvbklEICE9PSBudWxsID8gJyZjb252ZXJzYXRpb249JyArIHJvYm90LmNvbnZlcnNhdGlvbklEIDogJycpLCB0cnVlKTtcbiAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA+PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgPCA0MDApIHtcbiAgICAvLyAgICBKU09OIGlzIG5vdCB5ZXQgc3VwcG9ydGVkLCBvbmx5IFhNTC5cbiAgICAvLyAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIHZhciByZXNwID0geG1sVG9KU09OKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICBpZiAocm9ib3QuY29udmVyc2F0aW9uSUQgPT09IG51bGwpe1xuICAgICAgICAgICAgcm9ib3QuY29udmVyc2F0aW9uSUQgPSByZXNwLl9jb252ZXJzYXRpb247XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJlc3AubWVzc2FnZSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHBva2VUaGVSb2JvdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChuZXcgUmVnRXhwKGJhZFdvcmRzLmpvaW4oXCJ8XCIpKS50ZXN0KHJlc3AubWVzc2FnZSkgPT09IHRydWUpIHtcbiAgICAgICAgICAgIC8vIFRoZSByb2JvdCBpcyBzYXlpbmcgc29tZXRoaW5nIG9mZmVuc2l2ZSwgbGV0J3MgYXNrIGhpbSBhZ2FpbiFcbiAgICAgICAgICAgIGNvbnRhY3RUaGVSb2JvdChtZXNzYWdlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHJvYm90UmVzcG9uZChsZXNzQ2xldmVyKHJlc3AubWVzc2FnZSkpOyAgICAgICAgICAgIFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRVJST1InKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgLy8gYWxlcnQoJ0VSUk9SOiAnICsgcmVxdWVzdC5yZXNwb25zZVRleHQgKyAnXFxuXFxuUGxlYXNlIGNvbnRhY3Qgc3RlZmFuQHN0ZWZhbmJvaGFjZWsuY29tLlxcblxcblRoYW5rcyEnKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vVE9ETzogVGhlcmUgd2FzIGEgY29ubmVjdGlvbiBlcnJvciBvZiBzb21lIHNvcnRcbiAgICAgIH07XG4gIC8vIEJhY2tlbmQgZG9lc24ndCBzdXBwb3J0IGRhdGEgaW4gSlNPTiBmb3JtYXQsIGtlZXBpbmcgdGhpcyBoZXJlIGZvciBmdXR1cmUuXG4gIC8qXG4gICAgICB2YXIgcGFyYW1ldGVycyA9IHtcbiAgICAgICAgaW5zdGFuY2U6IHJvYm90LmlkLFxuICAgICAgICBhcHBsaWNhdGlvbjogJzE1NTUyNTAzMDQxNzMwMDU5NScsXG4gICAgICAgIG1lc3NhZ2U6ICdoZWxsbycgICAgICBcbiAgICAgIH07XG5cbiAgICAgIGlmIChyb2JvdC5jb252ZXJzYXRpb25JRCAhPT0gbnVsbCl7XG4gICAgICAgIHBhcmFtZXRlcnNbJ2NvbnZlcnNhdGlvbiddID0gcm9ib3QuY29udmVyc2F0aW9uSUQ7XG4gICAgICB9XG5cbiAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICAgIHJlcXVlc3Quc2VuZChKU09OLnN0cmluZ2lmeShwYXJhbWV0ZXJzKSk7XG4gICovICAgIFxuICAgICAgcmVxdWVzdC5zZW5kKCk7XG5cbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGlmIChtZXNzYWdlLmluZGV4T2YoJz8nKSA+IC0xKXtcbiAgICAgICAgaWYgKHJvYm90LmFscmVhZHlBbnN3ZXJlZFJlc3BvbnNlcy5sZW5ndGggPiAwKXtcbiAgICAgICAgICB2YXIgYW5ub3llZE1lc3NhZ2UgPSByb2JvdC5hbHJlYWR5QW5zd2VyZWRSZXNwb25zZXMuc3BsaWNlKGdldFJhbmRvbUludCgwLCByb2JvdC5hbHJlYWR5QW5zd2VyZWRSZXNwb25zZXMubGVuZ3RoIC0gMSksIDEpO1xuICAgICAgICAgIGFubm95ZWRNZXNzYWdlID0gYW5ub3llZE1lc3NhZ2VbMF07XG4gICAgICAgICAgcm9ib3RSZXNwb25kKGxlc3NDbGV2ZXIoYW5ub3llZE1lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgIHJvYm90UmVzcG9uZCgnLi4uJyk7IFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcG9rZVRoZVJvYm90KCl7XG4gICAgdmFyIHNlbmRUZXh0ID0gW1xuICAgICAgICAgIFwiLi4uXCJcbiAgICAgICAgXTtcbiAgICBjb250YWN0VGhlUm9ib3Qoc2VuZFRleHRbZ2V0UmFuZG9tSW50KDAsIHNlbmRUZXh0Lmxlbmd0aCAtIDEpXSk7XG4gIH1cblxuICBmdW5jdGlvbiByb2JvdFJlc3BvbmQobWVzc2FnZSl7XG4gICAgbWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgvKFJvYm90Tm90SW1wb3N0b3IoXFxkKSp8SmVubnl8bGluaCB0cnVvbmd8QWxpY2UpL2dpLCByb2JvdC5uYW1lKTtcbiAgICBtZXNzYWdlID0gbWVzc2FnZS5yZXBsYWNlKC9ST0JPVEZST00vZ2ksIHJvYm90LmZyb20pO1xuICAgIHJvYm90LnBlbmRpbmdSZXNwb25zZXMucHVzaChtZXNzYWdlKTtcblxuICAgIGNvbnNvbGUubG9nKCByb2JvdC5wZW5kaW5nUmVzcG9uc2VzLmxlbmd0aCApO1xuICAgIFxuICAgIGlmIChyb2JvdC5wZW5kaW5nUmVzcG9uc2VzLmxlbmd0aCA+IDApe1xuICAgICAgdmFyIG5leHRNZXNzYWdlID0gcm9ib3QucGVuZGluZ1Jlc3BvbnNlcy5zaGlmdCgpLFxuICAgICAgICAgIG5leHRNZXNzYWdlTGVuZ3RoID0gbmV4dE1lc3NhZ2UubGVuZ3RoLFxuICAgICAgICAgIG5leHRNZXNzYWdlRGVsYXkgPSAobmV4dE1lc3NhZ2VMZW5ndGggKiBnZXRSYW5kb21JbnQoNTAsIDEwMCkpICsgZ2V0UmFuZG9tSW50KDIwMDAsIDgwMDApO1xuICAgICAgaWYgKHJvYm90LnJlc3BvbnNlUGVuZGluZyA9PT0gZmFsc2Upe1xuICAgICAgICByb2JvdC5yZXNwb25zZVBlbmRpbmcgPSB0cnVlO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgYWRkTWVzc2FnZSgncm9ib3QnLCBtZXNzYWdlKTtcbiAgICAgICAgICByb2JvdC5yZXNwb25zZVBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSwgbmV4dE1lc3NhZ2VEZWxheSk7XG4gICAgICB9XG4gICAgICBlbHNle1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgcmV0dXJuIChmdW5jdGlvbihtZXNzYWdlKXtcbiAgICAgICAgICAgIHJvYm90UmVzcG9uZChtZXNzYWdlKTsgICAgICAgICAgICBcbiAgICAgICAgICB9KShtZXNzYWdlKTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmV2ZWFsSW1wb3N0b3IoZGV0ZWN0aXZlR3Vlc3Mpe1xuICAgIGlmIChwYXJ0bmVyUm9sZSAhPT0gJ3Vua25vd24nKXtcbiAgICAgIGdhbWVGaW5pc2hlZCA9IHRydWU7XG4gICAgICBpZiAoZGV0ZWN0aXZlR3Vlc3MgPT09IHBhcnRuZXJSb2xlKXtcbiAgICAgICAgYWRkTWVzc2FnZSgnc3lzdGVtJywgJ0NPUlJFQ1QnKTtcbiAgICAgICAgZ2xvYmFsU29ja2V0LmVtaXQoJ2dhbWUgb3ZlcicsICdkZXRlY3RpdmUgd29uJyk7XG4gICAgICAgIGdsb2JhbFNvY2tldC5lbWl0KCdJIHdvbicsICdkZXRlY3RpdmUnKTsgICAgICAgIFxuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgYWRkTWVzc2FnZSgnc3lzdGVtJywgJ0lOQ09SUkVDVCcpO1xuICAgICAgICBnbG9iYWxTb2NrZXQuZW1pdCgnZ2FtZSBvdmVyJywgJ2RldGVjdGl2ZSBsb3N0Jyk7XG4gICAgICAgIGdsb2JhbFNvY2tldC5lbWl0KCdJIGxvc3QnLCAnZGV0ZWN0aXZlJyk7ICAgICAgICBcbiAgICAgIH1cbiAgICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdHYW1lIGlzIG92ZXInKTtcbiAgICAgIHNob3dTaGFyaW5nQnV0dG9ucygpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgYWRkTWVzc2FnZSgnc3lzdGVtJywgJ0VSUk9SJyk7XG4gICAgICBhZGRNZXNzYWdlKCdzeXN0ZW0nLCAnVG9vIGVhcmx5IHRvIHRlbGwnKTtcbiAgICB9XG4gICAgLy9UT0RPOiBJbXBsZW1lbnQgc2NvcmluZyBzeXN0ZW0uXG4gIH1cblxuICBmdW5jdGlvbiBhZGRNZXNzYWdlKG1lc3NhZ2VGcm9tLCBtZXNzYWdlVGV4dCl7XG4gICAgaWYgKG1lc3NhZ2VUZXh0LnRyaW0oKS5sZW5ndGggPT09IDApe1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgbmV3TWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJMSVwiKTtcbiAgICBzd2l0Y2ggKG1lc3NhZ2VGcm9tKXtcbiAgICAgIGNhc2UgJ3VzZXInOlxuICAgICAgICBuZXdNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ3VzZXItbWVzc2FnZScpO1xuICAgICAgICBuZXdNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ25ldy1tZXNzYWdlJyk7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N5c3RlbSc6XG4gICAgICAgIG5ld01lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnc3lzdGVtLW1lc3NhZ2UnKTtcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlVGV4dCl7XG4gICAgICAgICAgY2FzZSAnRVJST1InOlxuICAgICAgICAgIGNhc2UgJ0lOQ09SUkVDVCc6XG4gICAgICAgICAgICBuZXdNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2Vycm9yLW1lc3NhZ2UnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdDT1JSRUNUJzpcbiAgICAgICAgICAgIG5ld01lc3NhZ2UuY2xhc3NMaXN0LmFkZCgndXNlci1jb3JyZWN0Jyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG5ld01lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnbmV3LW1lc3NhZ2UnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyb2JvdCc6XG4gICAgICBjYXNlICdpbXBvc3Rvcic6XG4gICAgICAgIG5ld01lc3NhZ2UuY2xhc3NMaXN0LmFkZCgncm9yaS1tZXNzYWdlJyk7XG4gICAgICAgIG5ld01lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnbmV3LW1lc3NhZ2UnKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8qXG4gICAgICBGdW4gc3R1ZmYgLS0gcGFydCBvbmUhICNlYXN0ZXJlZ2dzXG4gICAgKi9cblxuICAgIHZhciBmdW5TdHVmZiA9IGNsZWFyVGV4dChtZXNzYWdlVGV4dCwgdHJ1ZSk7XG5cbiAgICBpZiAoZnVuU3R1ZmYuaW5kZXhPZignd2lnZ2xlJykgPiAtMSl7XG4gICAgICBuZXdNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ3dpZ2dsZS1tZXNzYWdlJyk7ICAgICAgICBcbiAgICB9XG5cbiAgICBpZiAoZnVuU3R1ZmYuaW5kZXhPZignanVtcCcpID4gLTEpe1xuICAgICAgbmV3TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdqdW1wLW1lc3NhZ2UnKTsgICAgICAgIFxuICAgIH1cblxuICAgIG5ld01lc3NhZ2UuaW5uZXJIVE1MID0gbWVzc2FnZVRleHQucmVwbGFjZSgvKDwoW14+XSspPikvaWcsXCJcIik7XG4gICAgLy9UT0RPOiBSZXdyaXRlIHRoaXMhXG5cbiAgICBpZiAobWVzc2FnZUZyb20gIT09ICd1c2VyJyAmJiBtZXNzYWdlRnJvbSAhPT0gJ3N5c3RlbScpe1xuICAgICAgbmV3TWVzc2FnZS5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJtZXNzYWdlLXByZXBlbmRcIj4+PC9zcGFuPiAnICsgbmV3TWVzc2FnZS5pbm5lckhUTUw7XG4gICAgfVxuXG4gICAgaWYgKG1lc3NhZ2VUZXh0ID09PSAnR2FtZSBpcyBvdmVyJyAmJiBtZXNzYWdlRnJvbSA9PT0gJ3N5c3RlbScpe1xuICAgICAgbmV3TWVzc2FnZS5pbm5lckhUTUwgKz0gJy4gRm9sbG93IDxhIGhyZWY9XCJodHRwczovL3R3aXR0ZXIuY29tL2RldGVjdGl2ZWxvZ3NcIj5AZGV0ZWN0aXZlbG9nczwvYT4gZm9yIHVwZGF0ZXMhPC9wPic7XG4gICAgfVxuXG5cbiAgICBpZiAobWVzc2FnZUZyb20gPT09ICdyb2JvdCcgJiYgZ2FtZUZpbmlzaGVkID09PSB0cnVlKXtcbiAgICAgIC8vIG51bGxcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIG1lc3NhZ2VzLmFwcGVuZENoaWxkKG5ld01lc3NhZ2UpO1xuXG4gICAgICAvKlxuICAgICAgICBGdW4gc3R1ZmYgLS0gcGFydCB0d28hICNlYXN0ZXJlZ2dzXG4gICAgICAqL1xuICAgICAgc3dpdGNoKGNsZWFyVGV4dChtZXNzYWdlVGV4dCwgdHJ1ZSkpe1xuICAgICAgICBjYXNlICdpbGlrZXRoaXNnYW1lJzpcbiAgICAgICAgICBhZGRNZXNzYWdlKCdzeXN0ZW0nLCAnT2ggaGV5LCB0aGFua3MhJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdnb2Rtb2RlJzpcbiAgICAgICAgICBhZGRNZXNzYWdlKCdzeXN0ZW0nLCAnTm90IGluIHRoaXMgZ2FtZS4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICB9XG4gICAgaWYgKG1lc3NhZ2VGcm9tID09PSAndXNlcicpe1xuICAgICAgbWVzc2FnZVRleHRJbnB1dC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgaWYgKCFkb2N1bWVudC5oYXNGb2N1cygpKXtcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAnTmV3IG1lc3NhZ2UgfCBEZXRlY3RpdmUgYnkgQHN0ZWZhbmJvaGFjZWsnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7XG5cbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCxkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCk7XG5cblxuICAgIG1lc3NhZ2VUZXh0ID0gY2xlYXJUZXh0KG1lc3NhZ2VUZXh0LCBmYWxzZSk7XG5cblxuICAgIGlmIChtZXNzYWdlRnJvbSA9PT0gJ3VzZXInICYmIC95b3UuKnJlPy4qKGltcG9zdG9yfGltcG9zdGVyfHJvYm90fGJvdCkvZ2kudGVzdChtZXNzYWdlVGV4dCkgJiYgdXNlclJvbGUgPT09ICdkZXRlY3RpdmUnICYmIGdhbWVGaW5pc2hlZCA9PT0gZmFsc2UgJiYgbWVzc2FnZVRleHQuaW5kZXhPZignbm90JykgPT09IC0xKXtcblxuICAgICAgaWYgKG5ldyBSZWdFeHAoWyd5b3VhcmVhcm9ib3QnLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VcXCdyZWFyb2JvdCcsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdWFyZXJvYm90JyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91cmVyb2JvdCcsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdXJlYXJvYm90JyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91XFwncmVyb2JvdCcsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdWFyZXRoZXJvYm90JyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91XFwncmV0aGVyb2JvdCdcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwifFwiKSkudGVzdChtZXNzYWdlVGV4dCkgPT09IHRydWUpIHtcbiAgICAgICAgcmV2ZWFsSW1wb3N0b3IoJ3JvYm90Jyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChuZXcgUmVnRXhwKFsneW91YXJlYW5pbXBvc3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdWFyZWFuaW1wb3N0b3InLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VcXCdyZWFuaW1wb3N0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VcXCdyZWFuaW1wb3N0b3InLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VhcmVpbXBvc3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdWFyZWltcG9zdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91XFwncmVpbXBvc3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdVxcJ3JlaW1wb3N0b3InLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VyZXRoZWltcG9zdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91cmV0aGVpbXBvc3RvcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdXJlaW1wb3N0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VyZWltcG9zdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91cmVhbmltcG9zdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91cmVhbmltcG9zdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91YXJldGhlaW1wb3N0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VhcmV0aGVpbXBvc3RvcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdVxcJ3JldGhlaW1wb3N0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VcXCdyZXRoZWltcG9zdG9yJ1xuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oXCJ8XCIpKS50ZXN0KG1lc3NhZ2VUZXh0KSA9PT0gdHJ1ZSkge1xuICAgICAgIHJldmVhbEltcG9zdG9yKCdpbXBvc3RvcicpO1xuICAgICAgfSBcbiAgICAgIGVsc2V7XG4gICAgICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdQbGVhc2Ugc2F5IFwiWW91IGFyZSBhIHJvYm90XCIgb3IgXCJZb3UgYXJlIGFuIGltcG9zdG9yXCIuJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICh1c2VyUm9sZSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIGRvY3VtZW50LnRpdGxlID0gJ1lvdSBhcmUgdGhlICcgKyB1c2VyUm9sZSArICcgfCBEZXRlY3RpdmUgYnkgQHN0ZWZhbmJvaGFjZWsnO1xuICAgIH1cbiAgfSwgZmFsc2UpO1xuXG4gIHZhciBzb2NrZXQ7XG5cbiAgaWYgKHByb2R1Y3Rpb25TZXJ2ZXIoKSl7XG4gICAgLy8gc29ja2V0ID0gaW8oZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgKyAnLy9zdGVmYW5ib2hhY2VrLmNvbTozMDAzJyk7XG4gICAgLy8gc29ja2V0ID0gaW8oZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgKyAnLy9zdGVmYW5ib2hhY2VrLmNvbS9kZXRlY3RpdmUnKTtcblxuICAgIHNvY2tldCA9IGlvKCcvL3N0ZWZhbmJvaGFjZWsuY29tLycsIHsgICAgIC8vIG5vdGUgY2hhbmdlZCBVUkwgaGVyZVxuICAgICAgcGF0aDogJy9kZXRlY3RpdmUvc29ja2V0LmlvJyxcbiAgICAgIGF1dG9Db25uZWN0OiB0cnVlLFxuICAgICAgLy8gdHJhbnNwb3J0czogWyd3ZWJzb2NrZXQnXSxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyggc29ja2V0ICk7XG4gIH1cbiAgZWxzZXtcbiAgICBzb2NrZXQgPSBpbyhkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBkb2N1bWVudC5sb2NhdGlvbi5ob3N0KTtcbiAgfVxuXG4gIGlmIChkaXNtaXNzSW5zdHJ1Y3Rpb25zQnV0dG9uKXtcbiAgICBkaXNtaXNzSW5zdHJ1Y3Rpb25zQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgIGlmIChwYXJ0bmVyUm9sZSA9PT0gJ3JvYm90Jyl7XG4gICAgICAgIHJlc3RhcnRHbG9iYWxUaW1lcigpO1xuICAgICAgfVxuICAgICAgaW5zdHJ1Y3Rpb25zV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdzaGlmdGVkVXAnKTtcbiAgICAgIG1lc3NhZ2VGb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgbW9yZUluZm8uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICBtb3JlSW5mby5jbGFzc0xpc3QucmVtb3ZlKCdzaGlmdGVkJyk7XG4gICAgICBtZXNzYWdlVGV4dElucHV0LmZvY3VzKCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBpZiAocmVxdWVzdE5vdGlmaWNhdGlvblBlcm1pc3Npb24pe1xuICAvLyAgIHJlcXVlc3ROb3RpZmljYXRpb25QZXJtaXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgLy8gICAgIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbihmdW5jdGlvbiAocGVybWlzc2lvbikge1xuICAvLyAgICAgY29uc29sZS5sb2cocGVybWlzc2lvbik7XG4gIC8vICAgICB9KTtcbiAgLy8gICB9KTtcbiAgLy8gfVxuXG4gIGlmIChzaGFyZUNoYXRMb2dNb2R1bGUudHJpZ2dlckVsKXtcbiAgICBzaGFyZUNoYXRMb2dNb2R1bGUudHJpZ2dlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpe1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHNoYXJlVGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZXYpO1xuXG4gICAgICBzd2l0Y2ggKHNoYXJlVGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS11cmwnKSl7XG4gICAgICAgIGNhc2UgJ1JFTE9BRCc6XG4gICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmIChzaGFyZUNoYXRMb2dNb2R1bGUuc2hhcmVVcmwgPT09IG51bGwpe1xuICAgICAgICAgICAgc2hhcmVDaGF0TG9nTW9kdWxlLnN0YXR1cy5pbm5lckhUTUwgPSAnTG9hZGluZy4uLic7XG4gICAgICAgICAgICBnbG9iYWxTb2NrZXQuZW1pdCgnc2F2ZV9jaGF0X2xvZycsIG1lc3NhZ2VzV3JhcHBlci5pbm5lckhUTUwsIHVzZXJSb2xlKTsgICAgIFxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgc2hhcmVDaGF0TG9nKCk7XG4gICAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChzaGlmdGVkRWxzMS5sZW5ndGggPiAwKXtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHNoaWZ0ZWRFbHMxLCBmdW5jdGlvbihlbCwgaW5kZXgpIHtcbiAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hpZnRlZC0xJyk7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgndW5zaGlmdGVkLTEnKTtcbiAgICAgICAgfSxcbiAgICAgICAgKDIwMC0oMTAqaW5kZXgpKSppbmRleCk7XG4gICAgfSk7XG4gIH0gIFxuXG4gIHNvY2tldC5vbignY29ubmVjdGVkJywgZnVuY3Rpb24oZGF0YSkge1xuICAgIGdsb2JhbFNvY2tldCA9IHNvY2tldDtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCdjaGF0X2xvZ19zYXZlZCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBzaGFyZUNoYXRMb2dNb2R1bGUuY2hhdExvZ0lkID0gZGF0YTtcbiAgICBzaGFyZUNoYXRMb2coKTtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCdlcnJvcicsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBjb25zb2xlLmxvZygnRVJST1InKTtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCdnYW1lIG92ZXInLCBmdW5jdGlvbihzdGF0dXMpIHtcbiAgICBpZiAoc3RhdHVzID09PSAnZGV0ZWN0aXZlIHdvbicpe1xuICAgICAgYWRkTWVzc2FnZSgnc3lzdGVtJywgJ1lPVSBIQVZFIEJFRU4gUkVWRUFMRUQnKTtcbiAgICAgIGdsb2JhbFNvY2tldC5lbWl0KCdJIGxvc3QnLCAnaW1wb3N0b3InKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdZT1UgRk9PTEVEIFRIRSBERVRFQ1RJVkUnKTsgICAgICBcbiAgICAgIGdsb2JhbFNvY2tldC5lbWl0KCdJIHdvbicsICdpbXBvc3RvcicpO1xuICAgIH1cbiAgICBhZGRNZXNzYWdlKCdzeXN0ZW0nLCAnR2FtZSBpcyBvdmVyJyk7XG4gICAgc2hvd1NoYXJpbmdCdXR0b25zKCk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbigncGFydG5lciBkaXNjb25uZWN0ZWQnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgYWRkTWVzc2FnZSgnc3lzdGVtJywgJ1BhcnRuZXIgZGlzY29ubmVjdGVkLicpO1xuICAgIHNob3dTaGFyaW5nQnV0dG9ucygpO1xuXG4gICAgaWYgKGRhdGEgPT09ICdwaW5nIHRpbWVvdXQnKXtcbiAgICAgIC8vVE9ETzogV2FzIHRoaXMgYSBib3Q/XG4gICAgfVxuICAgIGlmIChwYXJ0bmVyUm9sZSAhPT0gJ3Vua25vd24nICYmIHVzZXJSb2xlID09PSAnZGV0ZWN0aXZlJyAmJiBnYW1lRmluaXNoZWQgPT09IGZhbHNlKXtcbiAgICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdZb3Ugd2VyZSBzcGVha2luZyB3aXRoIHRoZSAnICsgcGFydG5lclJvbGUudG9VcHBlckNhc2UoKSArICcuJyk7XG4gICAgfVxuICB9KTtcblxuICBzb2NrZXQub24oJ3lvdSBhcmUnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgZ2FtZVN0YXJ0ZWQgPSB0cnVlO1xuICAgIGNsZWFyVGltZW91dChnbG9iYWxUaW1lcldhaXRpbmcpO1xuICAgIHVzZXJSb2xlID0gZGF0YTtcbiAgICBsb2FkaW5nSW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ3NoaWZ0ZWRVcCcpO1xuICAgIHZhciB1bnNoaWZ0ZWRFbHMxID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndW5zaGlmdGVkLTEnKVxuXG4gICAgaWYgKHVuc2hpZnRlZEVsczEubGVuZ3RoID4gMCl7XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHVuc2hpZnRlZEVsczEsIGZ1bmN0aW9uKGVsLCBpbmRleCkge1xuICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCd1bnNoaWZ0ZWQtMScpO1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnc2hpZnRlZFVwMScpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgKDIwMC0oMTAqaW5kZXgpKSppbmRleCk7XG4gICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgaWYgKHNoaWZ0ZWRFbHMubGVuZ3RoID4gMCl7XG4gICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHNoaWZ0ZWRFbHMsIGZ1bmN0aW9uKGVsLCBpbmRleCkge1xuICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzaGlmdGVkJyk7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCd1bnNoaWZ0ZWQnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgICgyMDAtKDEwKmluZGV4KSkqaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuLy8gICAgd2hhdElzVGhpc0xpbmsuY2xhc3NMaXN0LmFkZCgnc2hpZnRlZFVwJyk7XG4gICAgZGlzbWlzc0luc3RydWN0aW9uc0J1dHRvbi5mb2N1cygpO1xuICAgIGRvY3VtZW50LnRpdGxlID0gJ1lvdSBhcmUgdGhlICcgKyB1c2VyUm9sZSArICcgfCBEZXRlY3RpdmUgYnkgQHN0ZWZhbmJvaGFjZWsnO1xuICAgIHJvbGVSZW1pbmRlci5pbm5lckhUTUwgPSAndGhlIDxzcGFuIGNsYXNzPVwiaGlnaGxpZ2h0XCI+JyArIHVzZXJSb2xlICsgJzwvc3Bhbj4nO1xuICAgIHlvdUFyZS5pbm5lckhUTUwgPSAnWW91IGFyZSB0aGUgPHNwYW4gY2xhc3M9XCJoaWdobGlnaHRcIj4nICsgdXNlclJvbGUgKyAnPC9zcGFuPic7XG4gICAgaWYgKHVzZXJSb2xlID09PSAnZGV0ZWN0aXZlJyl7XG4gICAgICBpbnN0cnVjdGlvbnMuaW5uZXJIVE1MID0gJzxwPllvdSBtdXN0IGZpZ3VyZSBvdXQgd2hldGhlciB5b3UgYXJlIHNwZWFraW5nIHRvIGEgPHNwYW4gY2xhc3M9XCJoaWdobGlnaHRcIj5ST0JPVDwvc3Bhbj4qIG9yIGFuIDxzcGFuIGNsYXNzPVwiaGlnaGxpZ2h0XCI+SU1QT1NUT1I8L3NwYW4+LCBhbm90aGVyIHBsYXllciBwcmV0ZW5kaW5nIHRvIGJlIGEgPHNwYW4gY2xhc3M9XCJoaWdobGlnaHRcIj5ST0JPVDwvc3Bhbj4qLjwvcD4nICtcbiAgICAgICAgJzxwPlNheSA8ZW0+XCJZb3UgYXJlIGFuIGltcG9zdG9yXCI8L2VtPiBvciA8ZW0+XCJZb3UgYXJlIGEgcm9ib3RcIjwvZW0+IG9uY2UgeW91IGFyZSBjb25maWRlbnQgd2l0aCB5b3VyIGNob2ljZS48L3A+JyArXG4gICAgICAgICc8cCBjbGFzcz1cImRlZmluaXRpb25cIj4qQSA8YSBocmVmPVwiaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DaGF0Ym90XCIgdGFyZ2V0PVwiX2JsYW5rXCI+Y2hhdHRlciByb2JvdDwvYT4gaXMgYSB0eXBlIG9mIGNvbnZlcnNhdGlvbmFsIGFnZW50LCBhIGNvbXB1dGVyIHByb2dyYW0gZGVzaWduZWQgdG8gc2ltdWxhdGUgYW4gaW50ZWxsaWdlbnQgY29udmVyc2F0aW9uIHdpdGggb25lIG9yIG1vcmUgaHVtYW4gdXNlcnMgdmlhIGF1ZGl0b3J5IG9yIHRleHR1YWwgbWV0aG9kcy48L3A+JztcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGluc3RydWN0aW9ucy5pbm5lckhUTUwgPSAnPHA+WW91IG11c3QgY29udmluY2UgdGhlIDxzcGFuIGNsYXNzPVwiaGlnaGxpZ2h0XCI+REVURUNUSVZFPC9zcGFuPiB0aGF0IGhlIG9yIHNoZSBpcyBzcGVha2luZyB0byBhIDxzcGFuIGNsYXNzPVwiaGlnaGxpZ2h0XCI+Uk9CT1Q8L3NwYW4+Ki48L3A+JyArIFxuICAgICAgJzxwIGNsYXNzPVwiZGVmaW5pdGlvblwiPipBIDxhIGhyZWY9XCJodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NoYXRib3RcIiB0YXJnZXQ9XCJfYmxhbmtcIj5jaGF0dGVyIHJvYm90PC9hPiBpcyBhIHR5cGUgb2YgY29udmVyc2F0aW9uYWwgYWdlbnQsIGEgY29tcHV0ZXIgcHJvZ3JhbSBkZXNpZ25lZCB0byBzaW11bGF0ZSBhbiBpbnRlbGxpZ2VudCBjb252ZXJzYXRpb24gd2l0aCBvbmUgb3IgbW9yZSBodW1hbiB1c2VycyB2aWEgYXVkaXRvcnkgb3IgdGV4dHVhbCBtZXRob2RzLjwvcD4nOyAgICAgIFxuICAgIH1cbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCdwYWlyZWQnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgaWYgKGRhdGEudXNlcnNbMF0gPT09ICdyb2JvdCcgfHwgZGF0YS51c2Vyc1sxXSA9PT0gJ3JvYm90Jyl7XG4gICAgICBwYXJ0bmVyUm9sZSA9ICdyb2JvdCc7XG4gICAgICBzZW5kTWVzc2FnZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGNvbnRhaW5zT2ZmZW5zaXZlTGFuZ3VhZ2UoY2xlYXJUZXh0KG1lc3NhZ2VUZXh0SW5wdXQudmFsdWUsIHRydWUpKSA9PT0gZmFsc2Upe1xuICAgICAgICAgIHJlc3RhcnRHbG9iYWxUaW1lcigpO1xuICAgICAgICAgIGlmIChnYW1lRmluaXNoZWQgPT09IGZhbHNlKXtcbiAgICAgICAgICAgIGNvbnRhY3RUaGVSb2JvdChtZXNzYWdlVGV4dElucHV0LnZhbHVlKTtcbiAgICAgICAgICAgIGFkZE1lc3NhZ2UoJ3VzZXInLCBtZXNzYWdlVGV4dElucHV0LnZhbHVlKTsgICAgICAgICAgXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICBhbGVydCgnTGV0XFwncyBnaXZlIHRoZSByb2JvdCBzb21lIHJlc3QuJyk7XG4gICAgICAgICAgfSAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBwYXJ0bmVyUm9sZSA9ICh1c2VyUm9sZSA9PT0gJ2RldGVjdGl2ZScgPyAnaW1wb3N0b3InIDogJ2RldGVjdGl2ZScpO1xuXG4gICAgICBzZW5kTWVzc2FnZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGNvbnRhaW5zT2ZmZW5zaXZlTGFuZ3VhZ2UoY2xlYXJUZXh0KG1lc3NhZ2VUZXh0SW5wdXQudmFsdWUsIHRydWUpKSA9PT0gZmFsc2Upe1xuICAgICAgICAgIHNvY2tldC5lbWl0KCdzZW5kIG1lc3NhZ2UnLCB7XG4gICAgICAgICAgICAgIGZyb206IHVzZXJSb2xlLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlVGV4dElucHV0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBhZGRNZXNzYWdlKCd1c2VyJywgbWVzc2FnZVRleHRJbnB1dC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICB9KTtcblxuICBzb2NrZXQub24oJ21lc3NhZ2UgcmVjZWl2ZWQnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgaWYgKHBhcnRuZXJSb2xlID09PSAndW5rbm93bicpe1xuICAgICAgcGFydG5lclJvbGUgPSBkYXRhLmZyb207XG4gICAgfVxuICAgIGlmIChkYXRhLmZyb20gIT09IHVzZXJSb2xlKXtcbiAgICAgIGFkZE1lc3NhZ2UocGFydG5lclJvbGUsIGRhdGEubWVzc2FnZSk7XG4gICAgfVxuICB9KTtcbn0pO1xuIl19
