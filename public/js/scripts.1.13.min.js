"strict";function productionServer(){return window.location.href.indexOf("stefanbohacek.com")>-1}function removeClasses(e){e.className=""}function getEventTarget(e){return e=e||window.event,e.target||e.srcElement}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}window.smoothScroll=function(){if(void 0!==document.querySelectorAll&&void 0!==window.pageYOffset&&void 0!==history.pushState){var e=function(e){return"HTML"===e.nodeName?-window.pageYOffset:e.getBoundingClientRect().top+window.pageYOffset},t=function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},o=function(e,o,n,a){return n>a?o:e+(o-e)*t(n/a)},n=function(t,n,a){n=n||500;var s,r=window.pageYOffset;s="number"==typeof t?parseInt(t):e(t);var i=Date.now(),l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,15)},d=function(){var e=Date.now()-i;window.scroll(0,o(r,s,e,n)),e>n?"function"==typeof a&&a(t):l(d)};d()},a=function(e){e.preventDefault(),n(document.getElementById(this.hash.substring(1)),500,function(){})};return document.addEventListener("DOMContentLoaded",function(){for(var e,t=document.querySelectorAll('a[href^="#"]'),o=t.length;e=t[--o];)e.addEventListener("click",a,!1)}),n}}();var xmlToJSON=function(e){var t=new X2JS,o=t.xml_str2json(e);return o=o.response};window.ready=function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)};var userRole,partnerRole="unknown",gameStarted=!1,gameFinished=!1;window.onbeforeunload=function(){return gameFinished===!1?"Are you sure?":void 0},ready(function(){function e(e,t){return e=e.toLowerCase().trim().replace(/ /g,""),t===!0&&(e=e.replace(/[.,?!\s,]/g,"")),e}function t(e){for(var t=0,o=Y.length;o>t;t++)if(new RegExp(Y[t],"gi").test(e.replace(/\W/g,""))===!0)return c("system","ERROR"),c("system","Unable to send message"),!0;return!1}function o(){B.service=u.getAttribute("data-service");var e="Play Detective, a game by @stefanbohacek";null!==B.service&&"reddit"===B.service&&(e="[log] TITLE"),B.shareUrl=u.getAttribute("data-url").replace(/DESCRIPTION/,'Detective: A "reverse Turing test" chat game.').replace(/CHATLOGURL/gi,"http://stefanbohacek.com/detective/log?id="+B.chatLogId).replace(/SHORTTITLE/,e),B.status.innerHTML="",window.open(B.shareUrl)}function n(){clearTimeout(g),g=setTimeout(function(){i()},getRandomInt(3e4,6e4))}function a(e){if(H.useLessClever===!0&&"..."!==e){e=e.toLowerCase().replace(/^(i )| i /gi," I ").trim();var t=e.replace(/([.?!])\s*(?=[A-Z])/,"$1|").split("|");1===t.length&&(e=e.replace(/\.$/,"")),5===getRandomInt(1,10)&&(e=e.replace(/(')/gi,""))}switch(getRandomInt(1,1e4)){case"1":e=e.replace("ll","l");break;case"2":e=e.replace("ss","s");break;case"3":e=e.replace("l","k");break;case"4":e=e.replace("o","p");break;case"4":e=e.replace("w","s");break;case"5":e=e.replace("s","d")}return e}function s(){C.style.display="block",Array.prototype.forEach.call(document.getElementsByClassName("share-link-shifted"),function(e,t){setTimeout(function(){e.classList.remove("share-link-shifted"),e.classList.add("share-link-unshifted")},10*t*t)})}function r(t){if(-1===H.alreadyAnswered.indexOf(e(t,!0))){"..."!==t&&H.alreadyAnswered.push(e(t,!0));var o=new XMLHttpRequest;o.open("GET","//www.botlibre.com/rest/botlibre/form-chat?instance="+H.id+"&application=155525030417300595&message="+t+(null!==H.conversationID?"&conversation="+H.conversationID:""),!0),o.onload=function(){if(o.status>=200&&o.status<400){var e=xmlToJSON(o.responseText);null===H.conversationID&&(H.conversationID=e._conversation),void 0===e.message?i():new RegExp(D.join("|")).test(e.message)===!0?r(t):l(a(e.message))}},o.onerror=function(){},o.send()}else if(t.indexOf("?")>-1)if(H.alreadyAnsweredResponses.length>0){var n=H.alreadyAnsweredResponses.splice(getRandomInt(0,H.alreadyAnsweredResponses.length-1),1);n=n[0],l(a(n))}else l("...")}function i(){var e=["..."];r(e[getRandomInt(0,e.length-1)])}function l(e){if(e=e.replace(/(RobotNotImpostor(\d)*|Jenny|linh truong|Alice)/gi,H.name),e=e.replace(/ROBOTFROM/gi,H.from),H.pendingResponses.push(e),console.log(H.pendingResponses.length),H.pendingResponses.length>0){var t=H.pendingResponses.shift(),o=t.length,n=o*getRandomInt(50,100)+getRandomInt(2e3,8e3);H.responsePending===!1?(H.responsePending=!0,setTimeout(function(){c("robot",e),H.responsePending=!1},n)):setTimeout(function(){return function(e){l(e)}(e)},1e3)}}function d(e){"unknown"!==partnerRole?(gameFinished=!0,e===partnerRole?(c("system","CORRECT"),m.emit("game over","detective won"),m.emit("I won","detective")):(c("system","INCORRECT"),m.emit("game over","detective lost"),m.emit("I lost","detective")),c("system","Game is over"),s()):(c("system","ERROR"),c("system","Too early to tell"))}function c(t,o){if(0===o.trim().length)return!1;var n=document.createElement("LI");switch(t){case"user":n.classList.add("user-message"),n.classList.add("new-message");break;case"system":switch(n.classList.add("system-message"),o){case"ERROR":case"INCORRECT":n.classList.add("error-message");break;case"CORRECT":n.classList.add("user-correct");break;default:n.classList.add("new-message")}break;case"robot":case"impostor":n.classList.add("rori-message"),n.classList.add("new-message")}var a=e(o,!0);if(a.indexOf("wiggle")>-1&&n.classList.add("wiggle-message"),a.indexOf("jump")>-1&&n.classList.add("jump-message"),n.innerHTML=o.replace(/(<([^>]+)>)/gi,""),"user"!==t&&"system"!==t&&(n.innerHTML='<span class="message-prepend">></span> '+n.innerHTML),"Game is over"===o&&"system"===t&&(n.innerHTML+='. Follow <a href="https://twitter.com/detectivelogs">@detectivelogs</a> for updates!</p>'),"robot"===t&&gameFinished===!0);else switch(O.appendChild(n),e(o,!0)){case"ilikethisgame":c("system","Oh hey, thanks!");break;case"godmode":c("system","Not in this game.")}"user"===t?I.value="":document.hasFocus()||(document.title="New message | Detective by @stefanbohacek"),document.body.scrollTop=document.body.scrollHeight,window.scrollTo(0,document.body.scrollHeight),o=e(o,!1),"user"===t&&/you.*re?.*(impostor|imposter|robot|bot)/gi.test(o)&&"detective"===userRole&&gameFinished===!1&&-1===o.indexOf("not")&&(new RegExp(["youarearobot","you'rearobot","youarerobot","yourerobot","yourearobot","you'rerobot","youaretherobot","you'retherobot"].join("|")).test(o)===!0?d("robot"):new RegExp(["youareanimposter","youareanimpostor","you'reanimposter","you'reanimpostor","youareimposter","youareimpostor","you'reimposter","you'reimpostor","youretheimposter","youretheimpostor","youreimposter","youreimpostor","youreanimposter","youreanimpostor","youaretheimposter","youaretheimpostor","you'retheimposter","you'retheimpostor"].join("|")).test(o)===!0?d("impostor"):c("system",'Please say "You are a robot" or "You are an impostor".'))}var u,m,g,h=document.getElementsByClassName("shifted-1"),p=document.getElementsByClassName("shifted"),y=document.getElementById("loading"),f=document.getElementById("you-are"),v=document.getElementById("instructions-wrapper"),w=document.getElementById("instructions"),R=document.getElementById("dismiss-instructions"),b=document.getElementById("more-info"),L=document.getElementById("role-reminder"),E=document.getElementById("message-form"),k=document.getElementById("send-message"),I=document.getElementById("message-text"),T=document.getElementById("messages-wrapper"),O=document.getElementById("messages"),C=document.getElementById("share-chat-log-wrapper"),B=(document.getElementById("what-is-this"),{triggerEl:document.getElementById("share-buttons-game"),service:null,status:document.getElementById("chat-log-url-status"),shareUrl:null,chatLogId:null}),A=["909409"],M=["your mom","not your business","none of your business","Steve","Bob","Lucy","Rita","Cletus","Rufus","Gale","Sidney","Emmie","Ethyl","Babara","Jodie","Karon","Rashida","Olen","Felisa","Nenita","Camille","Shay","Phoebe","Angelique","Monte","Exie","Lucrecia","Melodi","Marge","Zoe","Cassandra","Rosaura","Brendon","Mckinley","Lucie","Shandi","Mao","Vilma","Shara","Giselle","Royal","Dia","Ivy","Sheridan","Kandi","Juliette","Camilla","Susanna","Gary","Gertha","Britany","Marvella","Sina","Lakeesha","Sherill","Toney","Sherri","Albertina","Taren","Hildred","Erma","Lenard","Tyson","Markus","Inez","Letty","Deedra","Tammera","Stanley","Lora","Leon","Belkis","Janae","Lenna","Bronwyn","Kimbery","Debi","Bernie","Alleen","Deloise","Chiquita","Shanelle","Wynona","Kisha","Minna","Laronda","Chaya","Anabel","Leila","Arletha","Loyce","Crysta","Maegan","Valery","Hee","Ed","Mitsuko","Vincenzo","Mercedez","Janeen","Fredrick","Sharda","Dylan","Cassi","Mae","Bobbye","Lanny"],S=["Uh, where are you from?","That's prvivate.","Your mom!","I live right next to you!","...","I'm homeless","I'm homeless?"],D=["beeyotch","biatch","bitch","chinaman","chinamen","chink","crip","cunt","dago","daygo","dego","dick","douchebag","dyke","fag","fatass","fatso","gash","gimp","golliwog","gook","gyp","homo","hooker","jap","kike","kraut","lame","lardass","lesbo","negro","nigga","nigger","paki","pickaninny","pussy","raghead","retard","shemale","skank","slut","spade","spic","spook","tard","tits","titt","trannies","tranny","twat","wetback","whore","wop"],H={id:A[getRandomInt(0,A.length-1)],name:M[getRandomInt(0,M.length-1)],from:S[getRandomInt(0,S.length-1)],conversationID:null,useLessClever:Math.random()<.5?!0:!1,responsePending:!1,pendingResponses:[],alreadyAnswered:[],alreadyAnsweredResponses:["You already asked that question.","You already asked me that.","I think I already told you.","I already told you.","I already answered that.","Did you read my answer?","You already said that.","...","I told you","I literally just told you.","I just told you."]},Y=["n(i|1)+g{2,}((e|3)+r+|a)+","f+a+g+","f+(a|@)+g{2,}(o|0)+t+"],x=setTimeout(function(){gameStarted===!1&&(y.innerHTML="Still waiting...",x=setTimeout(function(){gameStarted===!1&&(y.innerHTML="Looks like nobody's around...",setTimeout(function(){gameFinished=!0,location.reload()},getRandomInt(300,3e3)))},4e4))},15e3);window.addEventListener("focus",function(){void 0!==userRole&&(document.title="You are the "+userRole+" | Detective by @stefanbohacek")},!1);var F;productionServer()?(F=io("//stefanbohacek.com/",{path:"/detective/socket.io",autoConnect:!0}),console.log(F)):F=io(document.location.protocol+"//"+document.location.host),R&&R.addEventListener("click",function(){"robot"===partnerRole&&n(),v.classList.add("shiftedUp"),E.classList.remove("hidden"),b.classList.remove("hidden"),b.classList.remove("shifted"),I.focus()}),B.triggerEl&&B.triggerEl.addEventListener("click",function(e){switch(e.preventDefault(),u=getEventTarget(e),u.getAttribute("data-url")){case"RELOAD":location.reload();break;default:null===B.shareUrl?(B.status.innerHTML="Loading...",m.emit("save_chat_log",T.innerHTML,userRole)):o()}}),h.length>0&&Array.prototype.forEach.call(h,function(e,t){setTimeout(function(){e.classList.remove("shifted-1"),e.classList.add("unshifted-1")},(200-10*t)*t)}),F.on("connected",function(){m=F}),F.on("chat_log_saved",function(e){B.chatLogId=e,o()}),F.on("error",function(e){console.log("ERROR"),console.log(e)}),F.on("game over",function(e){"detective won"===e?(c("system","YOU HAVE BEEN REVEALED"),m.emit("I lost","impostor")):(c("system","YOU FOOLED THE DETECTIVE"),m.emit("I won","impostor")),c("system","Game is over"),s()}),F.on("partner disconnected",function(e){c("system","Partner disconnected."),s(),"unknown"!==partnerRole&&"detective"===userRole&&gameFinished===!1&&c("system","You were speaking with the "+partnerRole.toUpperCase()+".")}),F.on("you are",function(e){gameStarted=!0,clearTimeout(x),userRole=e,y.classList.add("shiftedUp");var t=document.getElementsByClassName("unshifted-1");t.length>0&&Array.prototype.forEach.call(t,function(e,t){setTimeout(function(){e.classList.remove("unshifted-1"),e.classList.add("shiftedUp1")},(200-10*t)*t)}),p.length>0&&Array.prototype.forEach.call(p,function(e,t){setTimeout(function(){e.classList.remove("shifted"),e.classList.add("unshifted")},(200-10*t)*t)}),R.focus(),document.title="You are the "+userRole+" | Detective by @stefanbohacek",L.innerHTML='the <span class="highlight">'+userRole+"</span>",f.innerHTML='You are the <span class="highlight">'+userRole+"</span>",w.innerHTML="detective"===userRole?'<p>You must figure out whether you are speaking to a <span class="highlight">ROBOT</span>* or an <span class="highlight">IMPOSTOR</span>, another player pretending to be a <span class="highlight">ROBOT</span>*.</p><p>Say <em>"You are an impostor"</em> or <em>"You are a robot"</em> once you are confident with your choice.</p><p class="definition">*A <a href="http://en.wikipedia.org/wiki/Chatbot" target="_blank">chatter robot</a> is a type of conversational agent, a computer program designed to simulate an intelligent conversation with one or more human users via auditory or textual methods.</p>':'<p>You must convince the <span class="highlight">DETECTIVE</span> that he or she is speaking to a <span class="highlight">ROBOT</span>*.</p><p class="definition">*A <a href="http://en.wikipedia.org/wiki/Chatbot" target="_blank">chatter robot</a> is a type of conversational agent, a computer program designed to simulate an intelligent conversation with one or more human users via auditory or textual methods.</p>'}),F.on("paired",function(o){"robot"===o.users[0]||"robot"===o.users[1]?(partnerRole="robot",k.addEventListener("click",function(o){o.preventDefault(),t(e(I.value,!0))===!1&&(n(),gameFinished===!1?(r(I.value),c("user",I.value)):alert("Let's give the robot some rest."))})):(partnerRole="detective"===userRole?"impostor":"detective",k.addEventListener("click",function(o){o.preventDefault(),t(e(I.value,!0))===!1&&(F.emit("send message",{from:userRole,message:I.value}),c("user",I.value))}))}),F.on("message received",function(e){"unknown"===partnerRole&&(partnerRole=e.from),e.from!==userRole&&c(partnerRole,e.message)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuMS4xMy5taW4uanMiXSwibmFtZXMiOlsicHJvZHVjdGlvblNlcnZlciIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImluZGV4T2YiLCJyZW1vdmVDbGFzc2VzIiwiZWwiLCJjbGFzc05hbWUiLCJnZXRFdmVudFRhcmdldCIsImUiLCJldmVudCIsInRhcmdldCIsInNyY0VsZW1lbnQiLCJnZXRSYW5kb21JbnQiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzbW9vdGhTY3JvbGwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwYWdlWU9mZnNldCIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJnZXRUb3AiLCJlbGVtZW50Iiwibm9kZU5hbWUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJlYXNlSW5PdXRDdWJpYyIsInQiLCJwb3NpdGlvbiIsInN0YXJ0IiwiZW5kIiwiZWxhcHNlZCIsImR1cmF0aW9uIiwiY2FsbGJhY2siLCJwYXJzZUludCIsImNsb2NrIiwiRGF0ZSIsIm5vdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsImZuIiwic2V0VGltZW91dCIsInN0ZXAiLCJzY3JvbGwiLCJsaW5rSGFuZGxlciIsImV2IiwicHJldmVudERlZmF1bHQiLCJnZXRFbGVtZW50QnlJZCIsInRoaXMiLCJoYXNoIiwic3Vic3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImEiLCJpbnRlcm5hbCIsImkiLCJsZW5ndGgiLCJ4bWxUb0pTT04iLCJ4bWxWYWx1ZSIsIngyanMiLCJYMkpTIiwianNvblZhbHVlIiwieG1sX3N0cjJqc29uIiwicmVzcG9uc2UiLCJyZWFkeSIsInJlYWR5U3RhdGUiLCJ1c2VyUm9sZSIsInBhcnRuZXJSb2xlIiwiZ2FtZVN0YXJ0ZWQiLCJnYW1lRmluaXNoZWQiLCJvbmJlZm9yZXVubG9hZCIsImNsZWFyVGV4dCIsInRleHQiLCJyZW1vdmVQdW5jdHVhdGlvbiIsInRvTG93ZXJDYXNlIiwidHJpbSIsInJlcGxhY2UiLCJjb250YWluc09mZmVuc2l2ZUxhbmd1YWdlIiwiaiIsIm9mZmVuc2l2ZVdvcmRzIiwiUmVnRXhwIiwidGVzdCIsImFkZE1lc3NhZ2UiLCJzaGFyZUNoYXRMb2ciLCJzaGFyZUNoYXRMb2dNb2R1bGUiLCJzZXJ2aWNlIiwic2hhcmVUYXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJzaGFyZVRpdGxlIiwic2hhcmVVcmwiLCJjaGF0TG9nSWQiLCJzdGF0dXMiLCJpbm5lckhUTUwiLCJvcGVuIiwicmVzdGFydEdsb2JhbFRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiZ2xvYmFsVGltZXIiLCJwb2tlVGhlUm9ib3QiLCJsZXNzQ2xldmVyIiwicm9ib3QiLCJ1c2VMZXNzQ2xldmVyIiwidGVtcCIsInNwbGl0Iiwic2hvd1NoYXJpbmdCdXR0b25zIiwic2hhcmVDaGF0TG9nV3JhcHBlciIsInN0eWxlIiwiZGlzcGxheSIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGwiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaW5kZXgiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJjb250YWN0VGhlUm9ib3QiLCJtZXNzYWdlIiwiYWxyZWFkeUFuc3dlcmVkIiwicHVzaCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsImlkIiwiY29udmVyc2F0aW9uSUQiLCJvbmxvYWQiLCJyZXNwIiwicmVzcG9uc2VUZXh0IiwiX2NvbnZlcnNhdGlvbiIsInVuZGVmaW5lZCIsImJhZFdvcmRzIiwiam9pbiIsInJvYm90UmVzcG9uZCIsIm9uZXJyb3IiLCJzZW5kIiwiYWxyZWFkeUFuc3dlcmVkUmVzcG9uc2VzIiwiYW5ub3llZE1lc3NhZ2UiLCJzcGxpY2UiLCJzZW5kVGV4dCIsIm5hbWUiLCJmcm9tIiwicGVuZGluZ1Jlc3BvbnNlcyIsImNvbnNvbGUiLCJsb2ciLCJuZXh0TWVzc2FnZSIsInNoaWZ0IiwibmV4dE1lc3NhZ2VMZW5ndGgiLCJuZXh0TWVzc2FnZURlbGF5IiwicmVzcG9uc2VQZW5kaW5nIiwicmV2ZWFsSW1wb3N0b3IiLCJkZXRlY3RpdmVHdWVzcyIsImdsb2JhbFNvY2tldCIsImVtaXQiLCJtZXNzYWdlRnJvbSIsIm1lc3NhZ2VUZXh0IiwibmV3TWVzc2FnZSIsImNyZWF0ZUVsZW1lbnQiLCJmdW5TdHVmZiIsIm1lc3NhZ2VzIiwiYXBwZW5kQ2hpbGQiLCJtZXNzYWdlVGV4dElucHV0IiwidmFsdWUiLCJoYXNGb2N1cyIsInRpdGxlIiwiYm9keSIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsInNjcm9sbFRvIiwic2hpZnRlZEVsczEiLCJzaGlmdGVkRWxzIiwibG9hZGluZ0luZGljYXRvciIsInlvdUFyZSIsImluc3RydWN0aW9uc1dyYXBwZXIiLCJpbnN0cnVjdGlvbnMiLCJkaXNtaXNzSW5zdHJ1Y3Rpb25zQnV0dG9uIiwibW9yZUluZm8iLCJyb2xlUmVtaW5kZXIiLCJtZXNzYWdlRm9ybSIsInNlbmRNZXNzYWdlQnV0dG9uIiwibWVzc2FnZXNXcmFwcGVyIiwidHJpZ2dlckVsIiwicm9ib3RJRHMiLCJuYW1lcyIsInBsYWNlc1ByaXZhdGUiLCJnbG9iYWxUaW1lcldhaXRpbmciLCJyZWxvYWQiLCJzb2NrZXQiLCJpbyIsInBhdGgiLCJhdXRvQ29ubmVjdCIsInByb3RvY29sIiwiaG9zdCIsImZvY3VzIiwib24iLCJkYXRhIiwidG9VcHBlckNhc2UiLCJ1bnNoaWZ0ZWRFbHMxIiwidXNlcnMiLCJhbGVydCJdLCJtYXBwaW5ncyI6IkFBQUEsUUEwRUEsU0FBU0Esb0JBQ1AsTUFBUUMsUUFBT0MsU0FBU0MsS0FBS0MsUUFBUSxxQkFBdUIsR0FHOUQsUUFBU0MsZUFBY0MsR0FDckJBLEVBQUdDLFVBQVksR0FJakIsUUFBU0MsZ0JBQWVDLEdBRXRCLE1BREFBLEdBQUlBLEdBQUtSLE9BQU9TLE1BQ1RELEVBQUVFLFFBQVVGLEVBQUVHLFdBSXZCLFFBQVNDLGNB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QUViMEYsR0FFRSxVQUVGQyxHQUNFLFdBQ0Esb0JBQ0Esd0JBQ0EsUUFDQSxNQUNBLE9BQ0EsT0FDQSxTQUNBLFFBQ0EsT0FDQSxTQUNBLFFBQ0EsUUFDQSxTQUNBLFFBQ0EsUUFDQSxVQUNBLE9BQ0EsU0FDQSxTQUNBLFVBQ0EsT0FDQSxTQUNBLFlBQ0EsUUFDQSxPQUNBLFdBQ0EsU0FDQSxRQUNBLE1BQ0EsWUFDQSxVQUNBLFVBQ0EsV0FDQSxRQUNBLFNBQ0EsTUFDQSxRQUNBLFFBQ0EsVUFDQSxRQUNBLE1BQ0EsTUFDQSxXQUNBLFFBQ0EsV0FDQSxVQUNBLFVBQ0EsT0FDQSxTQUNBLFVBQ0EsV0FDQSxPQUNBLFdBQ0EsVUFDQSxRQUNBLFNBQ0EsWUFDQSxRQUNBLFVBQ0EsT0FDQSxTQUNBLFFBQ0EsU0FDQSxPQUNBLFFBQ0EsU0FDQSxVQUNBLFVBQ0EsT0FDQSxPQUNBLFNBQ0EsUUFDQSxRQUNBLFVBQ0EsVUFDQSxPQUNBLFNBQ0EsU0FDQSxVQUNBLFdBQ0EsV0FDQSxTQUNBLFFBQ0EsUUFDQSxVQUNBLFFBQ0EsU0FDQSxRQUNBLFVBQ0EsUUFDQSxTQUNBLFNBQ0EsU0FDQSxNQUNBLEtBQ0EsVUFDQSxXQUNBLFdBQ0EsU0FDQSxXQUNBLFNBQ0EsUUFDQSxRQUNBLE1BQ0EsU0FDQSxTQU9GQyxHQUNBLDBCQUNBLG1CQUNBLFlBQ0EsNEJBQ0EsTUFDQSxlQUNBLGlCQUVBckQsR0FJRSxXQUNBLFNBQ0EsUUFDQSxXQUNBLFdBQ0EsUUFDQSxPQUNBLE9BQ0EsT0FDQSxRQUNBLE9BQ0EsT0FDQSxZQUNBLE9BQ0EsTUFDQSxTQUNBLFFBQ0EsT0FDQSxPQUNBLFdBQ0EsT0FDQSxNQUNBLE9BQ0EsU0FDQSxNQUNBLE9BQ0EsUUFDQSxPQUNBLFVBQ0EsUUFDQSxRQUNBLFFBQ0EsU0FDQSxPQUNBLGFBQ0EsUUFDQSxVQUNBLFNBQ0EsVUFDQSxRQUNBLE9BQ0EsUUFDQSxPQUNBLFFBQ0EsT0FDQSxPQUNBLE9BQ0EsV0FDQSxTQUNBLE9BQ0EsVUFDQSxRQUNBLE9BRUY5QixHQUNFdUIsR0FBSTBELEVBQVMzSyxh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LEVBQWlCQyxPQUFPLE9BQVcsSUFDekV5QixFQUFPbEMsS0FBSyxnQkFDUlosS0FBTXpFLFNBQ05tRCxRQUFTMEMsRUFBaUJDLFFBRzlCOUUsRUFBVyxPQUFRNkUsRUFBaUJDLGFBTzVDeUIsRUFBT08sR0FBRyxtQkFBb0IsU0FBU0MsR0FDakIsWUFBaEI5SCxjQUNGQSxZQUFjOEgsRUFBS3RELE1BRWpCc0QsRUFBS3RELE9BQVN6RSxVQUNoQmdCLEVBQVdmLFlBQWE4SCxFQUFLNUUiLCJmaWxlIjoic2NyaXB0cy4xLjEzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwic3RyaWN0XCI7XG4vKlxuICBodHRwczovL2dpdGh1Yi5jb20vYWxpY2VsaWV1dGllci9zbW9vdGhTY3JvbGxcbiovXG53aW5kb3cuc21vb3RoU2Nyb2xsID0gKGZ1bmN0aW9uKCl7XG5pZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsID09PSB2b2lkIDAgfHwgd2luZG93LnBhZ2VZT2Zmc2V0ID09PSB2b2lkIDAgfHwgaGlzdG9yeS5wdXNoU3RhdGUgPT09IHZvaWQgMCkgeyByZXR1cm47IH1cbnZhciBnZXRUb3AgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgaWYoZWxlbWVudC5ub2RlTmFtZSA9PT0gJ0hUTUwnKXtcbiAgICAgIHJldHVybiAtd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgIH0gXG4gICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0O1xufTtcbnZhciBlYXNlSW5PdXRDdWJpYyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0PDAuNSA/IDQqdCp0KnQgOiAodC0xKSooMip0LTIpKigyKnQtMikrMTsgfTtcbnZhciBwb3NpdGlvbiA9IGZ1bmN0aW9uKHN0YXJ0LCBlbmQsIGVsYXBzZWQsIGR1cmF0aW9uKSB7XG4gICAgaWYgKGVsYXBzZWQgPiBkdXJhdGlvbil7XG4gICAgICByZXR1cm4gZW5kO1xuICAgIH0gXG4gICAgcmV0dXJuIHN0YXJ0ICsgKGVuZCAtIHN0YXJ0KSAqIGVhc2VJbk91dEN1YmljKGVsYXBzZWQgLyBkdXJhdGlvbik7XG59O1xudmFyIHNtb290aFNjcm9sbCA9IGZ1bmN0aW9uKGVsLCBkdXJhdGlvbiwgY2FsbGJhY2spe1xuICAgIGR1cmF0aW9uID0gZHVyYXRpb24gfHwgNTAwO1xuICAgIHZhciBzdGFydCA9IHdpbmRvdy5wYWdlWU9mZnNldCxcbiAgICAgICAgZW5kO1xuICAgIGlmICh0eXBlb2YgZWwgPT09ICdudW1iZXInKSB7XG4gICAgICBlbmQgPSBwYXJzZUludChlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVuZCA9IGdldFRvcChlbCk7XG4gICAgfVxuICAgIHZhciBjbG9jayA9IERhdGUubm93KCk7XG4gICAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgIGZ1bmN0aW9uKGZuKXt3aW5kb3cuc2V0VGltZW91dChmbiwgMTUpO307XG4gICAgdmFyIHN0ZXAgPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZWxhcHNlZCA9IERhdGUubm93KCkgLSBjbG9jaztcbiAgICAgICAgd2luZG93LnNjcm9sbCgwLCBwb3NpdGlvbihzdGFydCwgZW5kLCBlbGFwc2VkLCBkdXJhdGlvbikpO1xuICAgICAgICBpZiAoZWxhcHNlZCA+IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzdGVwKCk7XG59O1xudmFyIGxpbmtIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNtb290aFNjcm9sbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmhhc2guc3Vic3RyaW5nKDEpKSwgNTAwLCBmdW5jdGlvbihlbCkge1xuICAgIH0pO1xufTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW50ZXJuYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWZePVwiI1wiXScpLCBhO1xuICAgIGZvcih2YXIgaT1pbnRlcm5hbC5sZW5ndGg7IGE9aW50ZXJuYWxbLS1pXTspe1xuICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBsaW5rSGFuZGxlciwgZmFsc2UpO1xuICAgIH1cbn0pO1xucmV0dXJuIHNtb290aFNjcm9sbDtcbn0pKCk7XG5cbnZhciB4bWxUb0pTT04gPSBmdW5jdGlvbih4bWxWYWx1ZSkge1xuICB2YXIgeDJqcyA9IG5ldyBYMkpTKCksXG4gICAgICBqc29uVmFsdWUgPSB4MmpzLnhtbF9zdHIyanNvbih4bWxWYWx1ZSk7XG4gIGpzb25WYWx1ZSA9IGpzb25WYWx1ZS5yZXNwb25zZTtcbiAgcmV0dXJuIGpzb25WYWx1ZTtcbn07XG5cbndpbmRvdy5yZWFkeSA9IGZ1bmN0aW9uKGZuKSB7XG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnbG9hZGluZycpe1xuICAgIGZuKCk7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9kdWN0aW9uU2VydmVyKCl7XG4gIHJldHVybiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignc3RlZmFuYm9oYWNlay5jb20nKSA+IC0xKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcyhlbCl7XG4gIGVsLmNsYXNzTmFtZSA9ICcnO1xufVxuXG4vL2h0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTExNjkyOS9nZXQtY2xpY2tlZC1saS1mcm9tLXVsLW9uY2xpY2tcbmZ1bmN0aW9uIGdldEV2ZW50VGFyZ2V0KGUpIHtcbiAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICByZXR1cm4gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50OyBcbn1cblxuLy9odHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE1Mjc4MDMvZ2VuZXJhdGluZy1yYW5kb20tbnVtYmVycy1pbi1qYXZhc2NyaXB0LWluLWEtc3BlY2lmaWMtcmFuZ2VcbmZ1bmN0aW9uIGdldFJhbmRvbUludChtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcbn1cblxudmFyIHVzZXJSb2xlLCAvLyByb2JvdCBvciBpbXBvc3RvclxuICAgIHBhcnRuZXJSb2xlID0gJ3Vua25vd24nLFxuICAgIGdhbWVTdGFydGVkID0gZmFsc2UsXG4gICAgZ2FtZUZpbmlzaGVkID0gZmFsc2U7XG5cblxud2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24oZSkge1xuICBpZiAoZ2FtZUZpbmlzaGVkID09PSBmYWxzZSl7XG4gICAgcmV0dXJuICdBcmUgeW91IHN1cmU/JztcbiAgfVxufTtcblxuXG5yZWFkeShmdW5jdGlvbigpe1xuICB2YXIgc2hpZnRlZEVsczEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaGlmdGVkLTEnKSxcbiAgICAgIHNoaWZ0ZWRFbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaGlmdGVkJyksXG4gICAgICBsb2FkaW5nSW5kaWNhdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmcnKSxcbiAgICAgIHlvdUFyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd5b3UtYXJlJyksXG4gICAgICBpbnN0cnVjdGlvbnNXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3RydWN0aW9ucy13cmFwcGVyJyksXG4gICAgICBpbnN0cnVjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdHJ1Y3Rpb25zJyksXG4gICAgICBkaXNtaXNzSW5zdHJ1Y3Rpb25zQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc21pc3MtaW5zdHJ1Y3Rpb25zJyksXG4gICAgICBtb3JlSW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb3JlLWluZm8nKSxcbiAgICAgIHJvbGVSZW1pbmRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb2xlLXJlbWluZGVyJyksXG4gICAgICBtZXNzYWdlRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXNzYWdlLWZvcm0nKSxcbiAgICAgIHNlbmRNZXNzYWdlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmQtbWVzc2FnZScpLFxuICAgICAgbWVzc2FnZVRleHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXNzYWdlLXRleHQnKSxcbiAgICAgIG1lc3NhZ2VzV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXNzYWdlcy13cmFwcGVyJyksXG4gICAgICBtZXNzYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXNzYWdlcycpLFxuICAgICAgc2hhcmVDaGF0TG9nV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFyZS1jaGF0LWxvZy13cmFwcGVyJyksXG4gICAgICB3aGF0SXNUaGlzTGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aGF0LWlzLXRoaXMnKSxcbi8vICAgICAgcmVxdWVzdE5vdGlmaWNhdGlvblBlcm1pc3Npb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVxdWVzdC1ub3RpZmljYXRpb24tcGVybWlzc2lvbicpLFxuICAgICAgc2hhcmVDaGF0TG9nTW9kdWxlID0ge1xuICAgICAgICB0cmlnZ2VyRWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFyZS1idXR0b25zLWdhbWUnKSxcbiAgICAgICAgc2VydmljZTogbnVsbCxcbiAgICAgICAgc3RhdHVzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdC1sb2ctdXJsLXN0YXR1cycpLFxuICAgICAgICBzaGFyZVVybDogbnVsbCxcbiAgICAgICAgY2hhdExvZ0lkOiBudWxsXG4gICAgICB9LFxuICAgICAgcm9ib3RJRHMgPSBbXG4gICAgICAgIC8vICczNycsXG4gICAgICAgICc5MDk0MDknXG4gICAgICBdLFxuICAgICAgbmFtZXMgPSBbXG4gICAgICAgICd5b3VyIG1vbScsXG4gICAgICAgICdub3QgeW91ciBidXNpbmVzcycsXG4gICAgICAgICdub25lIG9mIHlvdXIgYnVzaW5lc3MnLFxuICAgICAgICAnU3RldmUnLFxuICAgICAgICAnQm9iJyxcbiAgICAgICAgJ0x1Y3knLFxuICAgICAgICAnUml0YScsXG4gICAgICAgICdDbGV0dXMnLCDCoFxuICAgICAgICAnUnVmdXMnLCDCoFxuICAgICAgICAnR2FsZScsIMKgXG4gICAgICAgICdTaWRuZXknLCDCoFxuICAgICAgICAnRW1taWUnLCDCoFxuICAgICAgICAnRXRoeWwnLCDCoFxuICAgICAgICAnQmFiYXJhJywgwqBcbiAgICAgICAgJ0pvZGllJywgwqBcbiAgICAgICAgJ0thcm9uJywgwqBcbiAgICAgICAgJ1Jhc2hpZGEnLCDCoFxuICAgICAgICAnT2xlbicsIMKgXG4gICAgICAgICdGZWxpc2EnLCDCoFxuICAgICAgICAnTmVuaXRhJywgwqBcbiAgICAgICAgJ0NhbWlsbGUnLCDCoFxuICAgICAgICAnU2hheScsIMKgXG4gICAgICAgICdQaG9lYmUnLCDCoFxuICAgICAgICAnQW5nZWxpcXVlJywgwqBcbiAgICAgICAgJ01vbnRlJywgwqBcbiAgICAgICAgJ0V4aWUnLCDCoFxuICAgICAgICAnTHVjcmVjaWEnLCDCoFxuICAgICAgICAnTWVsb2RpJywgwqBcbiAgICAgICAgJ01hcmdlJywgwqBcbiAgICAgICAgJ1pvZScsIMKgXG4gICAgICAgICdDYXNzYW5kcmEnLCDCoFxuICAgICAgICAnUm9zYXVyYScsIMKgXG4gICAgICAgICdCcmVuZG9uJywgwqBcbiAgICAgICAgJ01ja2lubGV5JywgwqBcbiAgICAgICAgJ0x1Y2llJywgwqBcbiAgICAgICAgJ1NoYW5kaScsIMKgXG4gICAgICAgICdNYW8nLCDCoFxuICAgICAgICAnVmlsbWEnLCDCoFxuICAgICAgICAnU2hhcmEnLCDCoFxuICAgICAgICAnR2lzZWxsZScsIMKgXG4gICAgICAgICdSb3lhbCcsIMKgXG4gICAgICAgICdEaWEnLCDCoFxuICAgICAgICAnSXZ5JywgwqBcbiAgICAgICAgJ1NoZXJpZGFuJywgwqBcbiAgICAgICAgJ0thbmRpJywgwqBcbiAgICAgICAgJ0p1bGlldHRlJywgwqBcbiAgICAgICAgJ0NhbWlsbGEnLCDCoFxuICAgICAgICAnU3VzYW5uYScsIMKgXG4gICAgICAgICdHYXJ5JywgwqBcbiAgICAgICAgJ0dlcnRoYScsIMKgXG4gICAgICAgICdCcml0YW55JywgwqBcbiAgICAgICAgJ01hcnZlbGxhJywgwqBcbiAgICAgICAgJ1NpbmEnLCDCoFxuICAgICAgICAnTGFrZWVzaGEnLCDCoFxuICAgICAgICAnU2hlcmlsbCcsIMKgXG4gICAgICAgICdUb25leScsIMKgXG4gICAgICAgICdTaGVycmknLFxuICAgICAgICAnQWxiZXJ0aW5hJywgwqBcbiAgICAgICAgJ1RhcmVuJywgwqBcbiAgICAgICAgJ0hpbGRyZWQnLCDCoFxuICAgICAgICAnRXJtYScsIMKgXG4gICAgICAgICdMZW5hcmQnLCDCoFxuICAgICAgICAnVHlzb24nLCDCoFxuICAgICAgICAnTWFya3VzJywgwqBcbiAgICAgICAgJ0luZXonLCDCoFxuICAgICAgICAnTGV0dHknLCDCoFxuICAgICAgICAnRGVlZHJhJywgwqBcbiAgICAgICAgJ1RhbW1lcmEnLCDCoFxuICAgICAgICAnU3RhbmxleScsIMKgXG4gICAgICAgICdMb3JhJywgwqBcbiAgICAgICAgJ0xlb24nLCDCoFxuICAgICAgICAnQmVsa2lzJywgwqBcbiAgICAgICAgJ0phbmFlJywgwqBcbiAgICAgICAgJ0xlbm5hJywgwqBcbiAgICAgICAgJ0Jyb253eW4nLCDCoFxuICAgICAgICAnS2ltYmVyeScsIMKgXG4gICAgICAgICdEZWJpJywgwqBcbiAgICAgICAgJ0Jlcm5pZScsIMKgXG4gICAgICAgICdBbGxlZW4nLCDCoFxuICAgICAgICAnRGVsb2lzZScsIMKgXG4gICAgICAgICdDaGlxdWl0YScsIMKgXG4gICAgICAgICdTaGFuZWxsZScsIMKgXG4gICAgICAgICdXeW5vbmEnLCDCoFxuICAgICAgICAnS2lzaGEnLCDCoFxuICAgICAgICAnTWlubmEnLCDCoFxuICAgICAgICAnTGFyb25kYScsIMKgXG4gICAgICAgICdDaGF5YScsIMKgXG4gICAgICAgICdBbmFiZWwnLCDCoFxuICAgICAgICAnTGVpbGEnLCDCoFxuICAgICAgICAnQXJsZXRoYScsIMKgXG4gICAgICAgICdMb3ljZScsIMKgXG4gICAgICAgICdDcnlzdGEnLCDCoFxuICAgICAgICAnTWFlZ2FuJywgwqBcbiAgICAgICAgJ1ZhbGVyeScsIMKgXG4gICAgICAgICdIZWUnLCDCoFxuICAgICAgICAnRWQnLCDCoFxuICAgICAgICAnTWl0c3VrbycsIMKgXG4gICAgICAgICdWaW5jZW56bycsIMKgXG4gICAgICAgICdNZXJjZWRleicsIMKgXG4gICAgICAgICdKYW5lZW4nLCDCoFxuICAgICAgICAnRnJlZHJpY2snLCDCoFxuICAgICAgICAnU2hhcmRhJywgwqBcbiAgICAgICAgJ0R5bGFuJywgwqBcbiAgICAgICAgJ0Nhc3NpJywgwqBcbiAgICAgICAgJ01hZScsIMKgXG4gICAgICAgICdCb2JieWUnLCDCoFxuICAgICAgICAnTGFubnknICAgXG4gICAgICBdLFxuICAgICAgcGxhY2VzID0gW1xuICAgICAgJ1JvYm90IGZhY3RvcnknLFxuICAgICAgJ05ldyBZb3JrJyxcbiAgICAgICdCcm9va2x5bidcbiAgICAgIF0sXG4gICAgICBwbGFjZXNQcml2YXRlID0gW1xuICAgICAgJ1VoLCB3aGVyZSBhcmUgeW91IGZyb20/JyxcbiAgICAgICdUaGF0XFwncyBwcnZpdmF0ZS4nLFxuICAgICAgJ1lvdXIgbW9tIScsXG4gICAgICAnSSBsaXZlIHJpZ2h0IG5leHQgdG8geW91IScsXG4gICAgICAnLi4uJyxcbiAgICAgICdJXFwnbSBob21lbGVzcycsXG4gICAgICAnSVxcJ20gaG9tZWxlc3M/J1xuICAgICAgXSxcbiAgICAgIGJhZFdvcmRzID0gW1xuLypcbiAgICAgIEltcG9ydGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2Rhcml1c2svd29yZGZpbHRlci5cbiovICAgICAgXG4gICAgICAgIFwiYmVleW90Y2hcIixcbiAgICAgICAgXCJiaWF0Y2hcIixcbiAgICAgICAgXCJiaXRjaFwiLFxuICAgICAgICBcImNoaW5hbWFuXCIsXG4gICAgICAgIFwiY2hpbmFtZW5cIixcbiAgICAgICAgXCJjaGlua1wiLFxuICAgICAgICBcImNyaXBcIixcbiAgICAgICAgXCJjdW50XCIsXG4gICAgICAgIFwiZGFnb1wiLFxuICAgICAgICBcImRheWdvXCIsXG4gICAgICAgIFwiZGVnb1wiLFxuICAgICAgICBcImRpY2tcIixcbiAgICAgICAgXCJkb3VjaGViYWdcIixcbiAgICAgICAgXCJkeWtlXCIsXG4gICAgICAgIFwiZmFnXCIsXG4gICAgICAgIFwiZmF0YXNzXCIsXG4gICAgICAgIFwiZmF0c29cIixcbiAgICAgICAgXCJnYXNoXCIsXG4gICAgICAgIFwiZ2ltcFwiLFxuICAgICAgICBcImdvbGxpd29nXCIsXG4gICAgICAgIFwiZ29va1wiLFxuICAgICAgICBcImd5cFwiLFxuICAgICAgICBcImhvbW9cIixcbiAgICAgICAgXCJob29rZXJcIixcbiAgICAgICAgXCJqYXBcIixcbiAgICAgICAgXCJraWtlXCIsXG4gICAgICAgIFwia3JhdXRcIixcbiAgICAgICAgXCJsYW1lXCIsXG4gICAgICAgIFwibGFyZGFzc1wiLFxuICAgICAgICBcImxlc2JvXCIsXG4gICAgICAgIFwibmVncm9cIixcbiAgICAgICAgXCJuaWdnYVwiLFxuICAgICAgICBcIm5pZ2dlclwiLFxuICAgICAgICBcInBha2lcIixcbiAgICAgICAgXCJwaWNrYW5pbm55XCIsXG4gICAgICAgIFwicHVzc3lcIixcbiAgICAgICAgXCJyYWdoZWFkXCIsXG4gICAgICAgIFwicmV0YXJkXCIsXG4gICAgICAgIFwic2hlbWFsZVwiLFxuICAgICAgICBcInNrYW5rXCIsXG4gICAgICAgIFwic2x1dFwiLFxuICAgICAgICBcInNwYWRlXCIsXG4gICAgICAgIFwic3BpY1wiLFxuICAgICAgICBcInNwb29rXCIsXG4gICAgICAgIFwidGFyZFwiLFxuICAgICAgICBcInRpdHNcIixcbiAgICAgICAgXCJ0aXR0XCIsXG4gICAgICAgIFwidHJhbm5pZXNcIixcbiAgICAgICAgXCJ0cmFubnlcIixcbiAgICAgICAgXCJ0d2F0XCIsXG4gICAgICAgIFwid2V0YmFja1wiLFxuICAgICAgICBcIndob3JlXCIsXG4gICAgICAgIFwid29wXCJcbiAgICAgIF0sXG4gICAgICByb2JvdCA9IHtcbiAgICAgICAgaWQ6IHJvYm90SURzW2dldFJhbmRvbUludCgwLCByb2JvdElEcy5sZW5ndGggLSAxKV0sXG4gICAgICAgIG5hbWU6IG5hbWVzW2dldFJhbmRvbUludCgwLCBuYW1lcy5sZW5ndGggLSAxKV0sXG4gICAgICAgIGZyb206IHBsYWNlc1ByaXZhdGVbZ2V0UmFuZG9tSW50KDAsIHBsYWNlc1ByaXZhdGUubGVuZ3RoIC0gMSldLFxuICAgICAgICBjb252ZXJzYXRpb25JRDogbnVsbCxcbiAgICAgICAgdXNlTGVzc0NsZXZlcjogTWF0aC5yYW5kb20oKSA8IDAuNSA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgcmVzcG9uc2VQZW5kaW5nOiBmYWxzZSxcbiAgICAgICAgcGVuZGluZ1Jlc3BvbnNlczogW10sXG4gICAgICAgIGFscmVhZHlBbnN3ZXJlZDogW10sXG4gICAgICAgIGFscmVhZHlBbnN3ZXJlZFJlc3BvbnNlczogW1xuICAgICAgICAgICdZb3UgYWxyZWFkeSBhc2tlZCB0aGF0IHF1ZXN0aW9uLicsXG4gICAgICAgICAgJ1lvdSBhbHJlYWR5IGFza2VkIG1lIHRoYXQuJyxcbiAgICAgICAgICAnSSB0aGluayBJIGFscmVhZHkgdG9sZCB5b3UuJyxcbiAgICAgICAgICAnSSBhbHJlYWR5IHRvbGQgeW91LicsXG4gICAgICAgICAgJ0kgYWxyZWFkeSBhbnN3ZXJlZCB0aGF0LicsXG4gICAgICAgICAgJ0RpZCB5b3UgcmVhZCBteSBhbnN3ZXI/JyxcbiAgICAgICAgICAnWW91IGFscmVhZHkgc2FpZCB0aGF0LicsXG4gICAgICAgICAgJy4uLicsXG4gICAgICAgICAgJ0kgdG9sZCB5b3UnLFxuICAgICAgICAgICdJIGxpdGVyYWxseSBqdXN0IHRvbGQgeW91LicsXG4gICAgICAgICAgJ0kganVzdCB0b2xkIHlvdS4nXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBvZmZlbnNpdmVXb3JkcyA9IFtcbiAgICAgICAgJ24oaXwxKStnezIsfSgoZXwzKStyK3xhKSsnLFxuICAgICAgICAnZithK2crJyxcbiAgICAgICAgJ2YrKGF8QCkrZ3syLH0ob3wwKSt0KydcbiAgICAgIF0sXG4gICAgICBzaGFyZVRhcmdldCxcbiAgICAgIGdsb2JhbFNvY2tldCxcbiAgICAgIGdsb2JhbFRpbWVyLFxuICAgICAgZ2xvYmFsVGltZXJXYWl0aW5nID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICBpZiAoZ2FtZVN0YXJ0ZWQgPT09IGZhbHNlKXtcbiAgICAgICAgICBsb2FkaW5nSW5kaWNhdG9yLmlubmVySFRNTCA9ICdTdGlsbCB3YWl0aW5nLi4uJztcbiAgICAgICAgICBnbG9iYWxUaW1lcldhaXRpbmcgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoZ2FtZVN0YXJ0ZWQgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgbG9hZGluZ0luZGljYXRvci5pbm5lckhUTUwgPSAnTG9va3MgbGlrZSBub2JvZHlcXCdzIGFyb3VuZC4uLic7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBnYW1lRmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICB9LCBnZXRSYW5kb21JbnQoMzAwLCAzMDAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgNDAwMDApO1xuICAgICAgICB9XG4gICAgICB9LCAxNTAwMCk7XG5cbi8vICB2YXIgTm90aWZpY2F0aW9uID0gd2luZG93Lk5vdGlmaWNhdGlvbiB8fCB3aW5kb3cubW96Tm90aWZpY2F0aW9uIHx8IHdpbmRvdy53ZWJraXROb3RpZmljYXRpb247XG5cbiAgZnVuY3Rpb24gY2xlYXJUZXh0KHRleHQsIHJlbW92ZVB1bmN0dWF0aW9uKXtcbiAgICB0ZXh0ID0gdGV4dC50b0xvd2VyQ2FzZSgpLnRyaW0oKS5yZXBsYWNlKC8gL2csJycpO1xuICAgIGlmIChyZW1vdmVQdW5jdHVhdGlvbiA9PT0gdHJ1ZSl7XG4gICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9bLiw/IVxccyxdL2csICcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuXG5mdW5jdGlvbiBjb250YWluc09mZmVuc2l2ZUxhbmd1YWdlKHRleHQpe1xuICBmb3IgKHZhciBpPTAsIGo9b2ZmZW5zaXZlV29yZHMubGVuZ3RoOyBpPGo7IGkrKyl7XG4gICAgaWYgKG5ldyBSZWdFeHAob2ZmZW5zaXZlV29yZHNbaV0sICdnaScpLnRlc3QodGV4dC5yZXBsYWNlKC9cXFcvZywgJycpKSA9PT0gdHJ1ZSl7XG4gICAgICBhZGRNZXNzYWdlKCdzeXN0ZW0nLCAnRVJST1InKTsgICAgICBcbiAgICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdVbmFibGUgdG8gc2VuZCBtZXNzYWdlJyk7ICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4gIGZ1bmN0aW9uIHNoYXJlQ2hhdExvZygpe1xuICAgIHNoYXJlQ2hhdExvZ01vZHVsZS5zZXJ2aWNlID0gc2hhcmVUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNlcnZpY2UnKTtcblxuICAgIHZhciBzaGFyZVRpdGxlID0gJ1BsYXkgRGV0ZWN0aXZlLCBhIGdhbWUgYnkgQHN0ZWZhbmJvaGFjZWsnO1xuICAgIGlmIChzaGFyZUNoYXRMb2dNb2R1bGUuc2VydmljZSAhPT0gbnVsbCAmJiBzaGFyZUNoYXRMb2dNb2R1bGUuc2VydmljZSA9PT0gJ3JlZGRpdCcpe1xuICAgICAgc2hhcmVUaXRsZSA9ICdbbG9nXSBUSVRMRSc7XG4gICAgfVxuXG4gICAgc2hhcmVDaGF0TG9nTW9kdWxlLnNoYXJlVXJsID0gc2hhcmVUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXVybCcpXG4gICAgICAucmVwbGFjZSgvREVTQ1JJUFRJT04vLCAnRGV0ZWN0aXZlOiBBIFwicmV2ZXJzZSBUdXJpbmcgdGVzdFwiIGNoYXQgZ2FtZS4nKVxuICAgICAgLnJlcGxhY2UoL0NIQVRMT0dVUkwvZ2ksICdodHRwOi8vc3RlZmFuYm9oYWNlay5jb20vZGV0ZWN0aXZlL2xvZz9pZD0nICsgc2hhcmVDaGF0TG9nTW9kdWxlLmNoYXRMb2dJZClcbiAgICAgIC5yZXBsYWNlKC9TSE9SVFRJVExFLywgc2hhcmVUaXRsZSk7XG5cblxuICAgIHNoYXJlQ2hhdExvZ01vZHVsZS5zdGF0dXMuaW5uZXJIVE1MID0gJyc7XG4gICAgd2luZG93Lm9wZW4oc2hhcmVDaGF0TG9nTW9kdWxlLnNoYXJlVXJsKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc3RhcnRHbG9iYWxUaW1lcigpe1xuICAgIGNsZWFyVGltZW91dChnbG9iYWxUaW1lcik7XG4gICAgZ2xvYmFsVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICBwb2tlVGhlUm9ib3QoKTtcbiAgICB9LCBnZXRSYW5kb21JbnQoMzAwMDAsIDYwMDAwKSk7XG4gIH1cblxuICBmdW5jdGlvbiBsZXNzQ2xldmVyKHRleHQpe1xuICAgIGlmIChyb2JvdC51c2VMZXNzQ2xldmVyID09PSB0cnVlICYmIHRleHQgIT09ICcuLi4nKXtcbiAgICAgIHRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXihpICl8IGkgL2lnLFwiIEkgXCIpLnRyaW0oKTtcbiAgICAgIHZhciB0ZW1wID0gdGV4dC5yZXBsYWNlKC8oWy4/IV0pXFxzKig/PVtBLVpdKS8sIFwiJDF8XCIpLnNwbGl0KFwifFwiKTtcblxuICAgICAgaWYgKHRlbXAubGVuZ3RoID09PSAxKXtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXFwuJC8sIFwiXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ2V0UmFuZG9tSW50KDEsIDEwKSA9PT0gNSl7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLygnKS9naSwgXCJcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoIChnZXRSYW5kb21JbnQoMSwgMTAwMDApKXtcbiAgICAgIGNhc2UgJzEnOlxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCdsbCcsICdsJyk7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJzInOlxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCdzcycsICdzJyk7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJzMnOlxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCdsJywgJ2snKTtcbiAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnNCc6XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoJ28nLCAncCcpO1xuICAgICAgYnJlYWs7XG4gICAgICBjYXNlICc0JzpcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgndycsICdzJyk7XG4gICAgICBicmVhaztcbiAgICAgIGNhc2UgJzUnOlxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCdzJywgJ2QnKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tSb2xlKG1lc3NhZ2Upe1xuXG4gIH1cblxuXG4gIGZ1bmN0aW9uIHNob3dTaGFyaW5nQnV0dG9ucygpe1xuICAgIHNoYXJlQ2hhdExvZ1dyYXBwZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgLy9UT0RPOiBUaGlzIHNob3VsZCBiZSBhIGZ1bmN0aW9uLCBlZyByZW1vdmVDbGFzc1N0YWdnZXJlZChjbGFzcylcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NoYXJlLWxpbmstc2hpZnRlZCcpLCBmdW5jdGlvbihlbCwgaW5kZXgpIHtcbiAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hhcmUtbGluay1zaGlmdGVkJyk7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnc2hhcmUtbGluay11bnNoaWZ0ZWQnKTtcbiAgICAgICAgfSxcbiAgICAgICAgKCgxMCppbmRleCkpKmluZGV4KTtcbiAgICB9KTsgICAgXG4gIH1cblxuICBmdW5jdGlvbiBjb250YWN0VGhlUm9ib3QobWVzc2FnZSl7XG4gICAgaWYgKHJvYm90LmFscmVhZHlBbnN3ZXJlZC5pbmRleE9mKGNsZWFyVGV4dChtZXNzYWdlLCB0cnVlKSkgPT09IC0xKXtcbiAgICAgIGlmIChtZXNzYWdlICE9PSAnLi4uJyl7XG4gICAgICAgIHJvYm90LmFscmVhZHlBbnN3ZXJlZC5wdXNoKGNsZWFyVGV4dChtZXNzYWdlLCB0cnVlKSk7XG4gICAgICB9XG4gICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAvLyBCYWNrZW5kIGRvZXNuJ3Qgc3VwcG9ydCBkYXRhIGluIEpTT04gZm9ybWF0LCBrZWVwaW5nIHRoaXMgaGVyZSBmb3IgZnV0dXJlLlxuICAvLyAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsICcvL3d3dy5ib3RsaWJyZS5jb20vcmVzdC9ib3RsaWJyZS9mb3JtLWNoYXQnICwgdHJ1ZSk7XG4gICAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsICcvL3d3dy5ib3RsaWJyZS5jb20vcmVzdC9ib3RsaWJyZS9mb3JtLWNoYXQ/aW5zdGFuY2U9JyArIHJvYm90LmlkICsgJyZhcHBsaWNhdGlvbj0xNTU1MjUwMzA0MTczMDA1OTUmbWVzc2FnZT0nICsgbWVzc2FnZSArIChyb2JvdC5jb252ZXJzYXRpb25JRCAhPT0gbnVsbCA/ICcmY29udmVyc2F0aW9uPScgKyByb2JvdC5jb252ZXJzYXRpb25JRCA6ICcnKSwgdHJ1ZSk7XG4gICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPj0gMjAwICYmIHJlcXVlc3Quc3RhdHVzIDwgNDAwKSB7XG4gICAgLy8gICAgSlNPTiBpcyBub3QgeWV0IHN1cHBvcnRlZCwgb25seSBYTUwuXG4gICAgLy8gICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB2YXIgcmVzcCA9IHhtbFRvSlNPTihyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgaWYgKHJvYm90LmNvbnZlcnNhdGlvbklEID09PSBudWxsKXtcbiAgICAgICAgICAgIHJvYm90LmNvbnZlcnNhdGlvbklEID0gcmVzcC5fY29udmVyc2F0aW9uO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyZXNwLm1lc3NhZ2UgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICBwb2tlVGhlUm9ib3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAobmV3IFJlZ0V4cChiYWRXb3Jkcy5qb2luKFwifFwiKSkudGVzdChyZXNwLm1lc3NhZ2UpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAvLyBUaGUgcm9ib3QgaXMgc2F5aW5nIHNvbWV0aGluZyBvZmZlbnNpdmUsIGxldCdzIGFzayBoaW0gYWdhaW4hXG4gICAgICAgICAgICBjb250YWN0VGhlUm9ib3QobWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICByb2JvdFJlc3BvbmQobGVzc0NsZXZlcihyZXNwLm1lc3NhZ2UpKTsgICAgICAgICAgICBcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ0VSUk9SJyk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2cocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIC8vIGFsZXJ0KCdFUlJPUjogJyArIHJlcXVlc3QucmVzcG9uc2VUZXh0ICsgJ1xcblxcblBsZWFzZSBjb250YWN0IHN0ZWZhbkBzdGVmYW5ib2hhY2VrLmNvbS5cXG5cXG5UaGFua3MhJyk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvL1RPRE86IFRoZXJlIHdhcyBhIGNvbm5lY3Rpb24gZXJyb3Igb2Ygc29tZSBzb3J0XG4gICAgICB9O1xuICAvLyBCYWNrZW5kIGRvZXNuJ3Qgc3VwcG9ydCBkYXRhIGluIEpTT04gZm9ybWF0LCBrZWVwaW5nIHRoaXMgaGVyZSBmb3IgZnV0dXJlLlxuICAvKlxuICAgICAgdmFyIHBhcmFtZXRlcnMgPSB7XG4gICAgICAgIGluc3RhbmNlOiByb2JvdC5pZCxcbiAgICAgICAgYXBwbGljYXRpb246ICcxNTU1MjUwMzA0MTczMDA1OTUnLFxuICAgICAgICBtZXNzYWdlOiAnaGVsbG8nICAgICAgXG4gICAgICB9O1xuXG4gICAgICBpZiAocm9ib3QuY29udmVyc2F0aW9uSUQgIT09IG51bGwpe1xuICAgICAgICBwYXJhbWV0ZXJzWydjb252ZXJzYXRpb24nXSA9IHJvYm90LmNvbnZlcnNhdGlvbklEO1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIik7XG4gICAgICByZXF1ZXN0LnNlbmQoSlNPTi5zdHJpbmdpZnkocGFyYW1ldGVycykpO1xuICAqLyAgICBcbiAgICAgIHJlcXVlc3Quc2VuZCgpO1xuXG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBpZiAobWVzc2FnZS5pbmRleE9mKCc/JykgPiAtMSl7XG4gICAgICAgIGlmIChyb2JvdC5hbHJlYWR5QW5zd2VyZWRSZXNwb25zZXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgdmFyIGFubm95ZWRNZXNzYWdlID0gcm9ib3QuYWxyZWFkeUFuc3dlcmVkUmVzcG9uc2VzLnNwbGljZShnZXRSYW5kb21JbnQoMCwgcm9ib3QuYWxyZWFkeUFuc3dlcmVkUmVzcG9uc2VzLmxlbmd0aCAtIDEpLCAxKTtcbiAgICAgICAgICBhbm5veWVkTWVzc2FnZSA9IGFubm95ZWRNZXNzYWdlWzBdO1xuICAgICAgICAgIHJvYm90UmVzcG9uZChsZXNzQ2xldmVyKGFubm95ZWRNZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICByb2JvdFJlc3BvbmQoJy4uLicpOyBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBva2VUaGVSb2JvdCgpe1xuICAgIHZhciBzZW5kVGV4dCA9IFtcbiAgICAgICAgICBcIi4uLlwiXG4gICAgICAgIF07XG4gICAgY29udGFjdFRoZVJvYm90KHNlbmRUZXh0W2dldFJhbmRvbUludCgwLCBzZW5kVGV4dC5sZW5ndGggLSAxKV0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcm9ib3RSZXNwb25kKG1lc3NhZ2Upe1xuICAgIG1lc3NhZ2UgPSBtZXNzYWdlLnJlcGxhY2UoLyhSb2JvdE5vdEltcG9zdG9yKFxcZCkqfEplbm55fGxpbmggdHJ1b25nfEFsaWNlKS9naSwgcm9ib3QubmFtZSk7XG4gICAgbWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgvUk9CT1RGUk9NL2dpLCByb2JvdC5mcm9tKTtcbiAgICByb2JvdC5wZW5kaW5nUmVzcG9uc2VzLnB1c2gobWVzc2FnZSk7XG5cbiAgICBjb25zb2xlLmxvZyggcm9ib3QucGVuZGluZ1Jlc3BvbnNlcy5sZW5ndGggKTtcbiAgICBcbiAgICBpZiAocm9ib3QucGVuZGluZ1Jlc3BvbnNlcy5sZW5ndGggPiAwKXtcbiAgICAgIHZhciBuZXh0TWVzc2FnZSA9IHJvYm90LnBlbmRpbmdSZXNwb25zZXMuc2hpZnQoKSxcbiAgICAgICAgICBuZXh0TWVzc2FnZUxlbmd0aCA9IG5leHRNZXNzYWdlLmxlbmd0aCxcbiAgICAgICAgICBuZXh0TWVzc2FnZURlbGF5ID0gKG5leHRNZXNzYWdlTGVuZ3RoICogZ2V0UmFuZG9tSW50KDUwLCAxMDApKSArIGdldFJhbmRvbUludCgyMDAwLCA4MDAwKTtcbiAgICAgIGlmIChyb2JvdC5yZXNwb25zZVBlbmRpbmcgPT09IGZhbHNlKXtcbiAgICAgICAgcm9ib3QucmVzcG9uc2VQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIGFkZE1lc3NhZ2UoJ3JvYm90JywgbWVzc2FnZSk7XG4gICAgICAgICAgcm9ib3QucmVzcG9uc2VQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIH0sIG5leHRNZXNzYWdlRGVsYXkpO1xuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIHJldHVybiAoZnVuY3Rpb24obWVzc2FnZSl7XG4gICAgICAgICAgICByb2JvdFJlc3BvbmQobWVzc2FnZSk7ICAgICAgICAgICAgXG4gICAgICAgICAgfSkobWVzc2FnZSk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJldmVhbEltcG9zdG9yKGRldGVjdGl2ZUd1ZXNzKXtcbiAgICBpZiAocGFydG5lclJvbGUgIT09ICd1bmtub3duJyl7XG4gICAgICBnYW1lRmluaXNoZWQgPSB0cnVlO1xuICAgICAgaWYgKGRldGVjdGl2ZUd1ZXNzID09PSBwYXJ0bmVyUm9sZSl7XG4gICAgICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdDT1JSRUNUJyk7XG4gICAgICAgIGdsb2JhbFNvY2tldC5lbWl0KCdnYW1lIG92ZXInLCAnZGV0ZWN0aXZlIHdvbicpO1xuICAgICAgICBnbG9iYWxTb2NrZXQuZW1pdCgnSSB3b24nLCAnZGV0ZWN0aXZlJyk7ICAgICAgICBcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdJTkNPUlJFQ1QnKTtcbiAgICAgICAgZ2xvYmFsU29ja2V0LmVtaXQoJ2dhbWUgb3ZlcicsICdkZXRlY3RpdmUgbG9zdCcpO1xuICAgICAgICBnbG9iYWxTb2NrZXQuZW1pdCgnSSBsb3N0JywgJ2RldGVjdGl2ZScpOyAgICAgICAgXG4gICAgICB9XG4gICAgICBhZGRNZXNzYWdlKCdzeXN0ZW0nLCAnR2FtZSBpcyBvdmVyJyk7XG4gICAgICBzaG93U2hhcmluZ0J1dHRvbnMoKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdFUlJPUicpO1xuICAgICAgYWRkTWVzc2FnZSgnc3lzdGVtJywgJ1RvbyBlYXJseSB0byB0ZWxsJyk7XG4gICAgfVxuICAgIC8vVE9ETzogSW1wbGVtZW50IHNjb3Jpbmcgc3lzdGVtLlxuICB9XG5cbiAgZnVuY3Rpb24gYWRkTWVzc2FnZShtZXNzYWdlRnJvbSwgbWVzc2FnZVRleHQpe1xuICAgIGlmIChtZXNzYWdlVGV4dC50cmltKCkubGVuZ3RoID09PSAwKXtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIG5ld01lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiTElcIik7XG4gICAgc3dpdGNoIChtZXNzYWdlRnJvbSl7XG4gICAgICBjYXNlICd1c2VyJzpcbiAgICAgICAgbmV3TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCd1c2VyLW1lc3NhZ2UnKTtcbiAgICAgICAgbmV3TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCduZXctbWVzc2FnZScpO1xuICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzeXN0ZW0nOlxuICAgICAgICBuZXdNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ3N5c3RlbS1tZXNzYWdlJyk7XG4gICAgICAgIHN3aXRjaCAobWVzc2FnZVRleHQpe1xuICAgICAgICAgIGNhc2UgJ0VSUk9SJzpcbiAgICAgICAgICBjYXNlICdJTkNPUlJFQ1QnOlxuICAgICAgICAgICAgbmV3TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdlcnJvci1tZXNzYWdlJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnQ09SUkVDVCc6XG4gICAgICAgICAgICBuZXdNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ3VzZXItY29ycmVjdCcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBuZXdNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ25ldy1tZXNzYWdlJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncm9ib3QnOlxuICAgICAgY2FzZSAnaW1wb3N0b3InOlxuICAgICAgICBuZXdNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ3JvcmktbWVzc2FnZScpO1xuICAgICAgICBuZXdNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ25ldy1tZXNzYWdlJyk7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvKlxuICAgICAgRnVuIHN0dWZmIC0tIHBhcnQgb25lISAjZWFzdGVyZWdnc1xuICAgICovXG5cbiAgICB2YXIgZnVuU3R1ZmYgPSBjbGVhclRleHQobWVzc2FnZVRleHQsIHRydWUpO1xuXG4gICAgaWYgKGZ1blN0dWZmLmluZGV4T2YoJ3dpZ2dsZScpID4gLTEpe1xuICAgICAgbmV3TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCd3aWdnbGUtbWVzc2FnZScpOyAgICAgICAgXG4gICAgfVxuXG4gICAgaWYgKGZ1blN0dWZmLmluZGV4T2YoJ2p1bXAnKSA+IC0xKXtcbiAgICAgIG5ld01lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnanVtcC1tZXNzYWdlJyk7ICAgICAgICBcbiAgICB9XG5cbiAgICBuZXdNZXNzYWdlLmlubmVySFRNTCA9IG1lc3NhZ2VUZXh0LnJlcGxhY2UoLyg8KFtePl0rKT4pL2lnLFwiXCIpO1xuICAgIC8vVE9ETzogUmV3cml0ZSB0aGlzIVxuXG4gICAgaWYgKG1lc3NhZ2VGcm9tICE9PSAndXNlcicgJiYgbWVzc2FnZUZyb20gIT09ICdzeXN0ZW0nKXtcbiAgICAgIG5ld01lc3NhZ2UuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwibWVzc2FnZS1wcmVwZW5kXCI+Pjwvc3Bhbj4gJyArIG5ld01lc3NhZ2UuaW5uZXJIVE1MO1xuICAgIH1cblxuICAgIGlmIChtZXNzYWdlVGV4dCA9PT0gJ0dhbWUgaXMgb3ZlcicgJiYgbWVzc2FnZUZyb20gPT09ICdzeXN0ZW0nKXtcbiAgICAgIG5ld01lc3NhZ2UuaW5uZXJIVE1MICs9ICcuIEZvbGxvdyA8YSBocmVmPVwiaHR0cHM6Ly90d2l0dGVyLmNvbS9kZXRlY3RpdmVsb2dzXCI+QGRldGVjdGl2ZWxvZ3M8L2E+IGZvciB1cGRhdGVzITwvcD4nO1xuICAgIH1cblxuXG4gICAgaWYgKG1lc3NhZ2VGcm9tID09PSAncm9ib3QnICYmIGdhbWVGaW5pc2hlZCA9PT0gdHJ1ZSl7XG4gICAgICAvLyBudWxsXG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBtZXNzYWdlcy5hcHBlbmRDaGlsZChuZXdNZXNzYWdlKTtcblxuICAgICAgLypcbiAgICAgICAgRnVuIHN0dWZmIC0tIHBhcnQgdHdvISAjZWFzdGVyZWdnc1xuICAgICAgKi9cbiAgICAgIHN3aXRjaChjbGVhclRleHQobWVzc2FnZVRleHQsIHRydWUpKXtcbiAgICAgICAgY2FzZSAnaWxpa2V0aGlzZ2FtZSc6XG4gICAgICAgICAgYWRkTWVzc2FnZSgnc3lzdGVtJywgJ09oIGhleSwgdGhhbmtzIScpO1xuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZ29kbW9kZSc6XG4gICAgICAgICAgYWRkTWVzc2FnZSgnc3lzdGVtJywgJ05vdCBpbiB0aGlzIGdhbWUuJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgfVxuICAgIGlmIChtZXNzYWdlRnJvbSA9PT0gJ3VzZXInKXtcbiAgICAgIG1lc3NhZ2VUZXh0SW5wdXQudmFsdWUgPSAnJztcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIGlmICghZG9jdW1lbnQuaGFzRm9jdXMoKSl7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gJ05ldyBtZXNzYWdlIHwgRGV0ZWN0aXZlIGJ5IEBzdGVmYW5ib2hhY2VrJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0O1xuXG4gICAgd2luZG93LnNjcm9sbFRvKDAsZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQpO1xuXG5cbiAgICBtZXNzYWdlVGV4dCA9IGNsZWFyVGV4dChtZXNzYWdlVGV4dCwgZmFsc2UpO1xuXG5cbiAgICBpZiAobWVzc2FnZUZyb20gPT09ICd1c2VyJyAmJiAveW91LipyZT8uKihpbXBvc3RvcnxpbXBvc3Rlcnxyb2JvdHxib3QpL2dpLnRlc3QobWVzc2FnZVRleHQpICYmIHVzZXJSb2xlID09PSAnZGV0ZWN0aXZlJyAmJiBnYW1lRmluaXNoZWQgPT09IGZhbHNlICYmIG1lc3NhZ2VUZXh0LmluZGV4T2YoJ25vdCcpID09PSAtMSl7XG5cbiAgICAgIGlmIChuZXcgUmVnRXhwKFsneW91YXJlYXJvYm90JyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91XFwncmVhcm9ib3QnLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VhcmVyb2JvdCcsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdXJlcm9ib3QnLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VyZWFyb2JvdCcsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdVxcJ3Jlcm9ib3QnLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VhcmV0aGVyb2JvdCcsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdVxcJ3JldGhlcm9ib3QnXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbihcInxcIikpLnRlc3QobWVzc2FnZVRleHQpID09PSB0cnVlKSB7XG4gICAgICAgIHJldmVhbEltcG9zdG9yKCdyb2JvdCcpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAobmV3IFJlZ0V4cChbJ3lvdWFyZWFuaW1wb3N0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VhcmVhbmltcG9zdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91XFwncmVhbmltcG9zdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91XFwncmVhbmltcG9zdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91YXJlaW1wb3N0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VhcmVpbXBvc3RvcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdVxcJ3JlaW1wb3N0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VcXCdyZWltcG9zdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91cmV0aGVpbXBvc3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdXJldGhlaW1wb3N0b3InLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VyZWltcG9zdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91cmVpbXBvc3RvcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdXJlYW5pbXBvc3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdXJlYW5pbXBvc3RvcicsXG4gICAgICAgICAgICAgICAgICAgICAgJ3lvdWFyZXRoZWltcG9zdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91YXJldGhlaW1wb3N0b3InLFxuICAgICAgICAgICAgICAgICAgICAgICd5b3VcXCdyZXRoZWltcG9zdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAneW91XFwncmV0aGVpbXBvc3RvcidcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwifFwiKSkudGVzdChtZXNzYWdlVGV4dCkgPT09IHRydWUpIHtcbiAgICAgICByZXZlYWxJbXBvc3RvcignaW1wb3N0b3InKTtcbiAgICAgIH0gXG4gICAgICBlbHNle1xuICAgICAgICBhZGRNZXNzYWdlKCdzeXN0ZW0nLCAnUGxlYXNlIHNheSBcIllvdSBhcmUgYSByb2JvdFwiIG9yIFwiWW91IGFyZSBhbiBpbXBvc3RvclwiLicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAodXNlclJvbGUgIT09IHVuZGVmaW5lZCl7XG4gICAgICBkb2N1bWVudC50aXRsZSA9ICdZb3UgYXJlIHRoZSAnICsgdXNlclJvbGUgKyAnIHwgRGV0ZWN0aXZlIGJ5IEBzdGVmYW5ib2hhY2VrJztcbiAgICB9XG4gIH0sIGZhbHNlKTtcblxuICB2YXIgc29ja2V0O1xuXG4gIGlmIChwcm9kdWN0aW9uU2VydmVyKCkpe1xuICAgIC8vIHNvY2tldCA9IGlvKGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sICsgJy8vc3RlZmFuYm9oYWNlay5jb206MzAwMycpO1xuICAgIC8vIHNvY2tldCA9IGlvKGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sICsgJy8vc3RlZmFuYm9oYWNlay5jb20vZGV0ZWN0aXZlJyk7XG5cbiAgICBzb2NrZXQgPSBpbygnLy9zdGVmYW5ib2hhY2VrLmNvbS8nLCB7ICAgICAvLyBub3RlIGNoYW5nZWQgVVJMIGhlcmVcbiAgICAgIHBhdGg6ICcvZGV0ZWN0aXZlL3NvY2tldC5pbycsXG4gICAgICBhdXRvQ29ubmVjdDogdHJ1ZSxcbiAgICAgIC8vIHRyYW5zcG9ydHM6IFsnd2Vic29ja2V0J10sXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coIHNvY2tldCApO1xuICB9XG4gIGVsc2V7XG4gICAgc29ja2V0ID0gaW8oZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgZG9jdW1lbnQubG9jYXRpb24uaG9zdCk7XG4gIH1cblxuICBpZiAoZGlzbWlzc0luc3RydWN0aW9uc0J1dHRvbil7XG4gICAgZGlzbWlzc0luc3RydWN0aW9uc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICBpZiAocGFydG5lclJvbGUgPT09ICdyb2JvdCcpe1xuICAgICAgICByZXN0YXJ0R2xvYmFsVGltZXIoKTtcbiAgICAgIH1cbiAgICAgIGluc3RydWN0aW9uc1dyYXBwZXIuY2xhc3NMaXN0LmFkZCgnc2hpZnRlZFVwJyk7XG4gICAgICBtZXNzYWdlRm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIG1vcmVJbmZvLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgbW9yZUluZm8uY2xhc3NMaXN0LnJlbW92ZSgnc2hpZnRlZCcpO1xuICAgICAgbWVzc2FnZVRleHRJbnB1dC5mb2N1cygpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gaWYgKHJlcXVlc3ROb3RpZmljYXRpb25QZXJtaXNzaW9uKXtcbiAgLy8gICByZXF1ZXN0Tm90aWZpY2F0aW9uUGVybWlzc2lvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gIC8vICAgICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oZnVuY3Rpb24gKHBlcm1pc3Npb24pIHtcbiAgLy8gICAgIGNvbnNvbGUubG9nKHBlcm1pc3Npb24pO1xuICAvLyAgICAgfSk7XG4gIC8vICAgfSk7XG4gIC8vIH1cblxuICBpZiAoc2hhcmVDaGF0TG9nTW9kdWxlLnRyaWdnZXJFbCl7XG4gICAgc2hhcmVDaGF0TG9nTW9kdWxlLnRyaWdnZXJFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KXtcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzaGFyZVRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGV2KTtcblxuICAgICAgc3dpdGNoIChzaGFyZVRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJykpe1xuICAgICAgICBjYXNlICdSRUxPQUQnOlxuICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoc2hhcmVDaGF0TG9nTW9kdWxlLnNoYXJlVXJsID09PSBudWxsKXtcbiAgICAgICAgICAgIHNoYXJlQ2hhdExvZ01vZHVsZS5zdGF0dXMuaW5uZXJIVE1MID0gJ0xvYWRpbmcuLi4nO1xuICAgICAgICAgICAgZ2xvYmFsU29ja2V0LmVtaXQoJ3NhdmVfY2hhdF9sb2cnLCBtZXNzYWdlc1dyYXBwZXIuaW5uZXJIVE1MLCB1c2VyUm9sZSk7ICAgICBcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHNoYXJlQ2hhdExvZygpO1xuICAgICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpZiAoc2hpZnRlZEVsczEubGVuZ3RoID4gMCl7XG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzaGlmdGVkRWxzMSwgZnVuY3Rpb24oZWwsIGluZGV4KSB7XG4gICAgICBzZXRUaW1lb3V0KFxuICAgICAgICBmdW5jdGlvbigpe1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NoaWZ0ZWQtMScpO1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3Vuc2hpZnRlZC0xJyk7XG4gICAgICAgIH0sXG4gICAgICAgICgyMDAtKDEwKmluZGV4KSkqaW5kZXgpO1xuICAgIH0pO1xuICB9ICBcblxuICBzb2NrZXQub24oJ2Nvbm5lY3RlZCcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBnbG9iYWxTb2NrZXQgPSBzb2NrZXQ7XG4gIH0pO1xuXG4gIHNvY2tldC5vbignY2hhdF9sb2dfc2F2ZWQnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgc2hhcmVDaGF0TG9nTW9kdWxlLmNoYXRMb2dJZCA9IGRhdGE7XG4gICAgc2hhcmVDaGF0TG9nKCk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbignZXJyb3InLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgY29uc29sZS5sb2coJ0VSUk9SJyk7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH0pO1xuXG4gIHNvY2tldC5vbignZ2FtZSBvdmVyJywgZnVuY3Rpb24oc3RhdHVzKSB7XG4gICAgaWYgKHN0YXR1cyA9PT0gJ2RldGVjdGl2ZSB3b24nKXtcbiAgICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdZT1UgSEFWRSBCRUVOIFJFVkVBTEVEJyk7XG4gICAgICBnbG9iYWxTb2NrZXQuZW1pdCgnSSBsb3N0JywgJ2ltcG9zdG9yJyk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBhZGRNZXNzYWdlKCdzeXN0ZW0nLCAnWU9VIEZPT0xFRCBUSEUgREVURUNUSVZFJyk7ICAgICAgXG4gICAgICBnbG9iYWxTb2NrZXQuZW1pdCgnSSB3b24nLCAnaW1wb3N0b3InKTtcbiAgICB9XG4gICAgYWRkTWVzc2FnZSgnc3lzdGVtJywgJ0dhbWUgaXMgb3ZlcicpO1xuICAgIHNob3dTaGFyaW5nQnV0dG9ucygpO1xuICB9KTtcblxuICBzb2NrZXQub24oJ3BhcnRuZXIgZGlzY29ubmVjdGVkJywgZnVuY3Rpb24oZGF0YSkge1xuICAgIGFkZE1lc3NhZ2UoJ3N5c3RlbScsICdQYXJ0bmVyIGRpc2Nvbm5lY3RlZC4nKTtcbiAgICBzaG93U2hhcmluZ0J1dHRvbnMoKTtcblxuICAgIGlmIChkYXRhID09PSAncGluZyB0aW1lb3V0Jyl7XG4gICAgICAvL1RPRE86IFdhcyB0aGlzIGEgYm90P1xuICAgIH1cbiAgICBpZiAocGFydG5lclJvbGUgIT09ICd1bmtub3duJyAmJiB1c2VyUm9sZSA9PT0gJ2RldGVjdGl2ZScgJiYgZ2FtZUZpbmlzaGVkID09PSBmYWxzZSl7XG4gICAgICBhZGRNZXNzYWdlKCdzeXN0ZW0nLCAnWW91IHdlcmUgc3BlYWtpbmcgd2l0aCB0aGUgJyArIHBhcnRuZXJSb2xlLnRvVXBwZXJDYXNlKCkgKyAnLicpO1xuICAgIH1cbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCd5b3UgYXJlJywgZnVuY3Rpb24oZGF0YSkge1xuICAgIGdhbWVTdGFydGVkID0gdHJ1ZTtcbiAgICBjbGVhclRpbWVvdXQoZ2xvYmFsVGltZXJXYWl0aW5nKTtcbiAgICB1c2VyUm9sZSA9IGRhdGE7XG4gICAgbG9hZGluZ0luZGljYXRvci5jbGFzc0xpc3QuYWRkKCdzaGlmdGVkVXAnKTtcbiAgICB2YXIgdW5zaGlmdGVkRWxzMSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Vuc2hpZnRlZC0xJylcblxuICAgIGlmICh1bnNoaWZ0ZWRFbHMxLmxlbmd0aCA+IDApe1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh1bnNoaWZ0ZWRFbHMxLCBmdW5jdGlvbihlbCwgaW5kZXgpIHtcbiAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICBmdW5jdGlvbigpe1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgndW5zaGlmdGVkLTEnKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3NoaWZ0ZWRVcDEnKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgICgyMDAtKDEwKmluZGV4KSkqaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuXG5cblxuICAgIGlmIChzaGlmdGVkRWxzLmxlbmd0aCA+IDApe1xuICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzaGlmdGVkRWxzLCBmdW5jdGlvbihlbCwgaW5kZXgpIHtcbiAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICBmdW5jdGlvbigpe1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hpZnRlZCcpO1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgndW5zaGlmdGVkJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAoMjAwLSgxMCppbmRleCkpKmluZGV4KTtcbiAgICAgIH0pO1xuICAgIH1cbi8vICAgIHdoYXRJc1RoaXNMaW5rLmNsYXNzTGlzdC5hZGQoJ3NoaWZ0ZWRVcCcpO1xuICAgIGRpc21pc3NJbnN0cnVjdGlvbnNCdXR0b24uZm9jdXMoKTtcbiAgICBkb2N1bWVudC50aXRsZSA9ICdZb3UgYXJlIHRoZSAnICsgdXNlclJvbGUgKyAnIHwgRGV0ZWN0aXZlIGJ5IEBzdGVmYW5ib2hhY2VrJztcbiAgICByb2xlUmVtaW5kZXIuaW5uZXJIVE1MID0gJ3RoZSA8c3BhbiBjbGFzcz1cImhpZ2hsaWdodFwiPicgKyB1c2VyUm9sZSArICc8L3NwYW4+JztcbiAgICB5b3VBcmUuaW5uZXJIVE1MID0gJ1lvdSBhcmUgdGhlIDxzcGFuIGNsYXNzPVwiaGlnaGxpZ2h0XCI+JyArIHVzZXJSb2xlICsgJzwvc3Bhbj4nO1xuICAgIGlmICh1c2VyUm9sZSA9PT0gJ2RldGVjdGl2ZScpe1xuICAgICAgaW5zdHJ1Y3Rpb25zLmlubmVySFRNTCA9ICc8cD5Zb3UgbXVzdCBmaWd1cmUgb3V0IHdoZXRoZXIgeW91IGFyZSBzcGVha2luZyB0byBhIDxzcGFuIGNsYXNzPVwiaGlnaGxpZ2h0XCI+Uk9CT1Q8L3NwYW4+KiBvciBhbiA8c3BhbiBjbGFzcz1cImhpZ2hsaWdodFwiPklNUE9TVE9SPC9zcGFuPiwgYW5vdGhlciBwbGF5ZXIgcHJldGVuZGluZyB0byBiZSBhIDxzcGFuIGNsYXNzPVwiaGlnaGxpZ2h0XCI+Uk9CT1Q8L3NwYW4+Ki48L3A+JyArXG4gICAgICAgICc8cD5TYXkgPGVtPlwiWW91IGFyZSBhbiBpbXBvc3RvclwiPC9lbT4gb3IgPGVtPlwiWW91IGFyZSBhIHJvYm90XCI8L2VtPiBvbmNlIHlvdSBhcmUgY29uZmlkZW50IHdpdGggeW91ciBjaG9pY2UuPC9wPicgK1xuICAgICAgICAnPHAgY2xhc3M9XCJkZWZpbml0aW9uXCI+KkEgPGEgaHJlZj1cImh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2hhdGJvdFwiIHRhcmdldD1cIl9ibGFua1wiPmNoYXR0ZXIgcm9ib3Q8L2E+IGlzIGEgdHlwZSBvZiBjb252ZXJzYXRpb25hbCBhZ2VudCwgYSBjb21wdXRlciBwcm9ncmFtIGRlc2lnbmVkIHRvIHNpbXVsYXRlIGFuIGludGVsbGlnZW50IGNvbnZlcnNhdGlvbiB3aXRoIG9uZSBvciBtb3JlIGh1bWFuIHVzZXJzIHZpYSBhdWRpdG9yeSBvciB0ZXh0dWFsIG1ldGhvZHMuPC9wPic7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBpbnN0cnVjdGlvbnMuaW5uZXJIVE1MID0gJzxwPllvdSBtdXN0IGNvbnZpbmNlIHRoZSA8c3BhbiBjbGFzcz1cImhpZ2hsaWdodFwiPkRFVEVDVElWRTwvc3Bhbj4gdGhhdCBoZSBvciBzaGUgaXMgc3BlYWtpbmcgdG8gYSA8c3BhbiBjbGFzcz1cImhpZ2hsaWdodFwiPlJPQk9UPC9zcGFuPiouPC9wPicgKyBcbiAgICAgICc8cCBjbGFzcz1cImRlZmluaXRpb25cIj4qQSA8YSBocmVmPVwiaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DaGF0Ym90XCIgdGFyZ2V0PVwiX2JsYW5rXCI+Y2hhdHRlciByb2JvdDwvYT4gaXMgYSB0eXBlIG9mIGNvbnZlcnNhdGlvbmFsIGFnZW50LCBhIGNvbXB1dGVyIHByb2dyYW0gZGVzaWduZWQgdG8gc2ltdWxhdGUgYW4gaW50ZWxsaWdlbnQgY29udmVyc2F0aW9uIHdpdGggb25lIG9yIG1vcmUgaHVtYW4gdXNlcnMgdmlhIGF1ZGl0b3J5IG9yIHRleHR1YWwgbWV0aG9kcy48L3A+JzsgICAgICBcbiAgICB9XG4gIH0pO1xuXG4gIHNvY2tldC5vbigncGFpcmVkJywgZnVuY3Rpb24oZGF0YSkge1xuICAgIGlmIChkYXRhLnVzZXJzWzBdID09PSAncm9ib3QnIHx8IGRhdGEudXNlcnNbMV0gPT09ICdyb2JvdCcpe1xuICAgICAgcGFydG5lclJvbGUgPSAncm9ib3QnO1xuICAgICAgc2VuZE1lc3NhZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCl7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChjb250YWluc09mZmVuc2l2ZUxhbmd1YWdlKGNsZWFyVGV4dChtZXNzYWdlVGV4dElucHV0LnZhbHVlLCB0cnVlKSkgPT09IGZhbHNlKXtcbiAgICAgICAgICByZXN0YXJ0R2xvYmFsVGltZXIoKTtcbiAgICAgICAgICBpZiAoZ2FtZUZpbmlzaGVkID09PSBmYWxzZSl7XG4gICAgICAgICAgICBjb250YWN0VGhlUm9ib3QobWVzc2FnZVRleHRJbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICBhZGRNZXNzYWdlKCd1c2VyJywgbWVzc2FnZVRleHRJbnB1dC52YWx1ZSk7ICAgICAgICAgIFxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgYWxlcnQoJ0xldFxcJ3MgZ2l2ZSB0aGUgcm9ib3Qgc29tZSByZXN0LicpO1xuICAgICAgICAgIH0gICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgcGFydG5lclJvbGUgPSAodXNlclJvbGUgPT09ICdkZXRlY3RpdmUnID8gJ2ltcG9zdG9yJyA6ICdkZXRlY3RpdmUnKTtcblxuICAgICAgc2VuZE1lc3NhZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCl7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChjb250YWluc09mZmVuc2l2ZUxhbmd1YWdlKGNsZWFyVGV4dChtZXNzYWdlVGV4dElucHV0LnZhbHVlLCB0cnVlKSkgPT09IGZhbHNlKXtcbiAgICAgICAgICBzb2NrZXQuZW1pdCgnc2VuZCBtZXNzYWdlJywge1xuICAgICAgICAgICAgICBmcm9tOiB1c2VyUm9sZSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVRleHRJbnB1dC52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgYWRkTWVzc2FnZSgndXNlcicsIG1lc3NhZ2VUZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgc29ja2V0Lm9uKCdtZXNzYWdlIHJlY2VpdmVkJywgZnVuY3Rpb24oZGF0YSkge1xuICAgIGlmIChwYXJ0bmVyUm9sZSA9PT0gJ3Vua25vd24nKXtcbiAgICAgIHBhcnRuZXJSb2xlID0gZGF0YS5mcm9tO1xuICAgIH1cbiAgICBpZiAoZGF0YS5mcm9tICE9PSB1c2VyUm9sZSl7XG4gICAgICBhZGRNZXNzYWdlKHBhcnRuZXJSb2xlLCBkYXRhLm1lc3NhZ2UpO1xuICAgIH1cbiAgfSk7XG59KTtcbiJdfQ==
